<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø®Ø¨Ø© - Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„ÙØ±Ø¯ÙŠØ©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: linear-gradient(135deg, #1a237e, #311b92); color: white; min-height: 100vh; direction: rtl; padding: 20px; }
        
        .game-container { 
            max-width: 800px; 
            margin: 0 auto; 
            background: rgba(255,255,255,0.05); 
            border-radius: 20px; 
            padding: 30px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .user-info { 
            background: rgba(255,215,0,0.1); 
            padding: 15px; 
            border-radius: 10px; 
            margin-bottom: 20px; 
            text-align: center; 
            border: 1px solid rgba(255,215,0,0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .admin-badge {
            background: linear-gradient(135deg, #ff6b00, #ffd700);
            color: #1a237e;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }

        .timer { 
            font-size: 36px; 
            font-weight: bold; 
            color: #ffd700; 
            text-shadow: 0 0 10px rgba(255,215,0,0.5);
        }
        
        .question-text { 
            font-size: 24px; 
            margin: 30px 0; 
            line-height: 1.5; 
            min-height: 80px;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            border-left: 5px solid #ffd700;
        }

        .options-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 20px; 
            margin: 30px 0; 
        }
        
        .option-btn { 
            padding: 20px; 
            background: rgba(255,255,255,0.08); 
            border: 2px solid transparent; 
            border-radius: 15px; 
            color: white; 
            font-size: 18px; 
            cursor: pointer; 
            transition: all 0.3s;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .option-btn:hover { 
            background: rgba(255,255,255,0.12); 
            border-color: #ffd700; 
            transform: translateY(-3px); 
        }
        
        .option-btn.correct { 
            background: rgba(76,175,80,0.3); 
            border-color: #4CAF50;
        }
        
        .option-btn.wrong { 
            background: rgba(244,67,54,0.3); 
            border-color: #F44336;
        }

        .btn-primary { 
            background: linear-gradient(135deg, #ffd700, #ff6b00); 
            color: #1a237e; 
            padding: 15px 30px; 
            border: none; 
            border-radius: 50px; 
            font-size: 18px; 
            cursor: pointer; 
            margin: 10px; 
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-primary:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 5px 15px rgba(255,215,0,0.3);
        }
        
        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid #ffd700;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 18px;
            cursor: pointer;
            margin: 10px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-secondary:hover {
            background: rgba(255,215,0,0.1);
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-item .label {
            color: #bbbbbb;
            font-size: 14px;
        }
        
        .stat-item .value {
            color: #ffd700;
            font-size: 24px;
            font-weight: bold;
        }
        
        .result-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .result-box {
            background: linear-gradient(135deg, #1a237e, #311b92);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            border: 3px solid #ffd700;
        }
        
        .category-selection {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .category-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .category-btn {
            background: rgba(255,215,0,0.1);
            border: 1px solid rgba(255,215,0,0.3);
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .category-btn:hover {
            background: rgba(255,215,0,0.2);
            border-color: #ffd700;
        }
        
        .category-btn.selected {
            background: rgba(255,215,0,0.3);
            border-color: #ffd700;
            color: #ffd700;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .user-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .timer {
                font-size: 28px;
            }
            
            .question-text {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
        <div class="user-info">
            <div>
                <i class="fas fa-user"></i> Ø§Ù„Ù„Ø§Ø¹Ø¨: <span id="playerNameDisplay" style="color: #ffd700; font-weight: bold;">...</span>
                <span id="adminBadge" class="admin-badge" style="display: none; margin-right: 10px;">Ø§Ù„Ù…Ø´Ø±Ù</span>
            </div>
            <div>
                <i class="fas fa-star"></i> Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="scoreDisplay" style="color: #ffd700; font-weight: bold;">0</span>
            </div>
            <div>
                <i class="fas fa-clock"></i> Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span class="timer" id="timerDisplay">30</span> Ø«Ø§Ù†ÙŠØ©
            </div>
        </div>

        <!-- Ø§Ù„Ù„Ø¹Ø¨Ø© -->
        <div style="text-align: center;">
            <h1><i class="fas fa-gamepad"></i> ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø®Ø¨Ø©</h1>
            
            <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù… (ÙŠØ¸Ù‡Ø± Ø£ÙˆÙ„ Ù…Ø±Ø© ÙÙ‚Ø·) -->
            <div id="categorySelection" class="category-selection" style="display: none;">
                <h3><i class="fas fa-th-large"></i> Ø§Ø®ØªØ± Ù‚Ø³Ù… Ø§Ù„Ø£Ø³Ø¦Ù„Ø©:</h3>
                <div class="category-buttons">
                    <button class="category-btn" onclick="selectCategory('all')">Ø§Ù„ÙƒÙ„</button>
                    <button class="category-btn" onclick="selectCategory('football')">âš½ ÙƒØ±Ø© Ù‚Ø¯Ù…</button>
                    <button class="category-btn" onclick="selectCategory('movies')">ğŸ¬ Ø£ÙÙ„Ø§Ù…</button>
                    <button class="category-btn" onclick="selectCategory('music')">ğŸµ Ù…ÙˆØ³ÙŠÙ‚Ù‰</button>
                    <button class="category-btn" onclick="selectCategory('islamic')">ğŸ•Œ Ø¥Ø³Ù„Ø§Ù…ÙŠØ§Øª</button>
                    <button class="category-btn" onclick="selectCategory('brands')">ğŸ›ï¸ Ø¨Ø±Ø§Ù†Ø¯Ø§Øª</button>
                    <button class="category-btn" onclick="selectCategory('general')">ğŸŒ Ø«Ù‚Ø§ÙØ© Ø¹Ø§Ù…Ø©</button>
                    <button class="category-btn" onclick="selectCategory('history')">ğŸ›ï¸ Ø§Ù„ØªØ§Ø±ÙŠØ®</button>
                    <button class="category-btn" onclick="selectCategory('science')">ğŸ”¬ Ø§Ù„Ø¹Ù„ÙˆÙ…</button>
                    <button class="category-btn" onclick="selectCategory('geography')">ğŸ—ºï¸ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§</button>
                    <button class="category-btn" onclick="selectCategory('math')">â— Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</button>
                    <button class="category-btn" onclick="selectCategory('arts')">ğŸ¨ Ø§Ù„ÙÙ†ÙˆÙ†</button>
                </div>
                <button class="btn-primary" onclick="startWithSelectedCategory()" style="margin-top: 20px;">
                    <i class="fas fa-play"></i> Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯ÙŠ
                </button>
            </div>

            <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
            <div id="gameArea" style="display: none;">
                <p style="color: #bbbbff;"><span id="gameModeText">Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©</span> - Ø³Ø¤Ø§Ù„ <span id="questionCounter">1</span> Ù…Ù† <span id="totalQuestions">5</span></p>
                <p id="currentCategoryDisplay" style="background: rgba(255,215,0,0.1); display: inline-block; padding: 5px 15px; border-radius: 20px; margin: 10px 0;">Ø§Ù„Ù‚Ø³Ù…: Ø§Ù„ÙƒÙ„</p>

                <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
                <div class="stats-bar">
                    <div class="stat-item">
                        <div class="value" id="correctCount">0</div>
                        <div class="label">ØµØ­ÙŠØ­Ø©</div>
                    </div>
                    <div class="stat-item">
                        <div class="value" id="wrongCount">0</div>
                        <div class="label">Ø®Ø§Ø·Ø¦Ø©</div>
                    </div>
                    <div class="stat-item">
                        <div class="value" id="skippedCount">0</div>
                        <div class="label">Ù…ØªØ®Ø·Ø§Ø©</div>
                    </div>
                </div>

                <!-- Ø§Ù„Ø³Ø¤Ø§Ù„ -->
                <div class="question-text" id="questionText">
                    Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„...
                </div>

                <!-- Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª -->
                <div class="options-grid">
                    <button class="option-btn" id="option1" onclick="checkAnswer(1)">Ø§Ù„Ø®ÙŠØ§Ø± 1</button>
                    <button class="option-btn" id="option2" onclick="checkAnswer(2)">Ø§Ù„Ø®ÙŠØ§Ø± 2</button>
                    <button class="option-btn" id="option3" onclick="checkAnswer(3)">Ø§Ù„Ø®ÙŠØ§Ø± 3</button>
                    <button class="option-btn" id="option4" onclick="checkAnswer(4)">Ø§Ù„Ø®ÙŠØ§Ø± 4</button>
                </div>

                <!-- Ø§Ù„ØªØ­ÙƒÙ… -->
                <div style="margin-top: 30px;">
                    <button class="btn-primary" onclick="nextQuestion()" id="nextBtn" style="display: none;">
                        <i class="fas fa-arrow-left"></i> Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
                    </button>
                    <button class="btn-secondary" onclick="skipQuestion()" id="skipBtn">
                        <i class="fas fa-forward"></i> ØªØ®Ø·ÙŠ Ø§Ù„Ø³Ø¤Ø§Ù„
                    </button>
                    <button class="btn-primary" onclick="endGame()" style="background: #f44336;">
                        <i class="fas fa-home"></i> Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <div class="result-overlay" id="resultOverlay">
        <div class="result-box">
            <h2 style="color: #ffd700; margin-bottom: 20px;"><i class="fas fa-trophy"></i> Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!</h2>
            <div style="font-size: 72px; color: #ffd700; margin: 20px 0;" id="finalScore">0</div>
            <p style="font-size: 24px; margin-bottom: 30px;">Ù†Ù‚Ø·Ø©</p>
            
            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin: 20px 0;">
                <p><i class="fas fa-check-circle" style="color: #4CAF50;"></i> Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©: <span id="finalCorrect">0</span></p>
                <p><i class="fas fa-times-circle" style="color: #F44336;"></i> Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø©: <span id="finalWrong">0</span></p>
                <p><i class="fas fa-forward" style="color: #bbbbbb;"></i> Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØªØ®Ø·Ø§Ø©: <span id="finalSkipped">0</span></p>
                <p><i class="fas fa-th-large" style="color: #ffd700;"></i> Ø§Ù„Ù‚Ø³Ù…: <span id="finalCategory">Ø§Ù„ÙƒÙ„</span></p>
                <p><i class="fas fa-user" style="color: #2196F3;"></i> Ø§Ù„Ø­Ø§Ù„Ø©: <span id="finalStatus">ØªØ¬Ø±Ø¨Ø© Ù…Ø¬Ø§Ù†ÙŠØ©</span></p>
            </div>
            
            <div style="margin-top: 30px;">
                <button class="btn-primary" onclick="playAgain()" style="margin-right: 10px;">
                    <i class="fas fa-redo"></i> Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                </button>
                <button class="btn-secondary" onclick="goToHome()">
                    <i class="fas fa-home"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </button>
            </div>
        </div>
    </div>

    <script>
        // ========== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ==========
        let currentQuestionIndex = 0;
        let score = 0;
        let timeLeft = 30;
        let timerInterval;
        let questions = [];
        let playerName = '';
        let answered = false;
        let selectedCategory = 'all';
        let isAdmin = false;
        
        // Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        let stats = {
            correct: 0,
            wrong: 0,
            skipped: 0
        };

        // ========== Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ==========
        window.onload = function() {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø´Ø±Ù
            isAdmin = localStorage.getItem('isAdmin') === 'true';
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨
            playerName = localStorage.getItem('playerName') || 'Ù„Ø§Ø¹Ø¨';
            
            // Ø¹Ø±Ø¶ Ø´Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø±Ù
            if (isAdmin) {
                document.getElementById('adminBadge').style.display = 'inline-block';
                document.getElementById('gameModeText').textContent = 'ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø´Ø±Ù';
                document.getElementById('playerNameDisplay').textContent = playerName + ' ğŸ‘‘';
            } else {
                document.getElementById('playerNameDisplay').textContent = playerName;
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©
                const trialUsed = localStorage.getItem('trialUsed');
                const isSubscribed = localStorage.getItem('subscribed') === 'true';
                
                if (!isSubscribed && trialUsed === 'true') {
                    alert('âš ï¸ Ù„Ù‚Ø¯ Ø§Ø³ØªØ®Ø¯Ù…Øª ØªØ¬Ø±Ø¨ØªÙƒ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©! Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ù„ØµÙØ­Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ.');
                    window.location.href = 'subscribe.html';
                    return;
                }
                
                if (isSubscribed) {
                    document.getElementById('gameModeText').textContent = 'Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©';
                }
            }
            
            // Ø¹Ø±Ø¶ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù…
            showCategorySelection();
        };

        // ========== Ø¹Ø±Ø¶ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù… ==========
        function showCategorySelection() {
            document.getElementById('categorySelection').style.display = 'block';
            document.getElementById('gameArea').style.display = 'none';
            
            // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
            selectCategory('all');
        }

        // ========== Ø§Ø®ØªÙŠØ§Ø± Ù‚Ø³Ù… ==========
        function selectCategory(category) {
            selectedCategory = category;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // ØªØ¸Ù„ÙŠÙ„ Ø§Ù„Ø²Ø± Ø§Ù„Ù…Ø®ØªØ§Ø±
            document.querySelectorAll('.category-btn').forEach(btn => {
                if (btn.textContent.includes(getCategoryName(category)) || 
                    (category === 'all' && btn.textContent === 'Ø§Ù„ÙƒÙ„')) {
                    btn.classList.add('selected');
                }
            });
            
            console.log('Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØ§Ø±:', selectedCategory);
        }

        // ========== Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… ==========
        function getCategoryName(categoryCode) {
            const categories = {
                'all': 'Ø§Ù„ÙƒÙ„',
                'football': 'ÙƒØ±Ø© Ù‚Ø¯Ù…',
                'movies': 'Ø£ÙÙ„Ø§Ù…',
                'music': 'Ù…ÙˆØ³ÙŠÙ‚Ù‰',
                'islamic': 'Ø¥Ø³Ù„Ø§Ù…ÙŠØ§Øª',
                'brands': 'Ø¨Ø±Ø§Ù†Ø¯Ø§Øª',
                'general': 'Ø«Ù‚Ø§ÙØ© Ø¹Ø§Ù…Ø©',
                'history': 'Ø§Ù„ØªØ§Ø±ÙŠØ®',
                'science': 'Ø§Ù„Ø¹Ù„ÙˆÙ…',
                'geography': 'Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§',
                'math': 'Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª',
                'arts': 'Ø§Ù„ÙÙ†ÙˆÙ†'
            };
            return categories[categoryCode] || categoryCode;
        }

        // ========== Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØ§Ø± ==========
        function startWithSelectedCategory() {
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù…
            document.getElementById('categorySelection').style.display = 'none';
            document.getElementById('gameArea').style.display = 'block';
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø³Ù…
            document.getElementById('currentCategoryDisplay').textContent = 'Ø§Ù„Ù‚Ø³Ù…: ' + getCategoryName(selectedCategory);
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
            loadQuestions();
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
            startGame();
        }

        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ==========
        function loadQuestions() {
            // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù…Ù† Ù…Ù„Ù questions.js
            // ÙÙŠ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŒ Ø³Ù†Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù…Ù† Ø§Ù„Ù…Ù„Ù
            // Ù‡Ù†Ø§ Ø³Ù†Ø³ØªØ®Ø¯Ù… Ø£Ø³Ø¦Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù…Ù† Ù…Ø®ØªÙ„Ù Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
            
            // Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© (ÙŠØ¬Ø¨ Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©)
            const sampleQuestions = [
                { 
                    question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù‡Ø¯Ø§Ù Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠ Ù„ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", 
                    correct: 3, 
                    options: ["Ù„ÙŠÙˆÙ†ÙŠÙ„ Ù…ÙŠØ³ÙŠ", "ÙƒØ±ÙŠØ³ØªÙŠØ§Ù†Ùˆ Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ", "Ù…ÙŠØ±ÙˆØ³Ù„Ø§Ù ÙƒÙ„ÙˆØ²Ù‡", "Ø¨ÙŠÙ„ÙŠÙ‡"],
                    category: "football",
                    points: 10
                },
                { 
                    question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø³ÙˆØ± Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ", 
                    correct: 3, 
                    options: ["110", "112", "114", "120"],
                    category: "islamic",
                    points: 10
                },
                { 
                    question: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© ÙØ±Ù†Ø³Ø§ØŸ", 
                    correct: 1, 
                    options: ["Ø¨Ø§Ø±ÙŠØ³", "Ù„Ù†Ø¯Ù†", "Ø±ÙˆÙ…Ø§", "Ø¨Ø±Ù„ÙŠÙ†"],
                    category: "general",
                    points: 10
                },
                { 
                    question: "ÙÙŠ Ø£ÙŠ Ø³Ù†Ø© ÙˆÙ‚Ø¹Øª Ù…Ø¹Ø±ÙƒØ© Ø­Ø·ÙŠÙ†ØŸ", 
                    correct: 3, 
                    options: ["1167", "1174", "1187", "1191"],
                    category: "history",
                    points: 15
                },
                { 
                    question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ø§Ù„Ø£ÙƒØ«Ø± ÙˆÙØ±Ø© ÙÙŠ Ø§Ù„ÙƒÙˆÙ†ØŸ", 
                    correct: 3, 
                    options: ["Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†", "Ø§Ù„ÙƒØ±Ø¨ÙˆÙ†", "Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†", "Ø§Ù„Ù‡ÙŠÙ„ÙŠÙˆÙ…"],
                    category: "science",
                    points: 10
                }
            ];
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù‚Ø³Ù… "Ø§Ù„ÙƒÙ„"ØŒ Ù†Ø³ØªØ®Ø¯Ù… ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
            if (selectedCategory === 'all') {
                questions = sampleQuestions;
            } else {
                // Ù†ÙÙ„ØªØ± Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØ§Ø±
                questions = sampleQuestions.filter(q => q.category === selectedCategory);
                
                // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø£Ø³Ø¦Ù„Ø© ÙƒØ§ÙÙŠØ©ØŒ Ù†Ø¶ÙŠÙ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
                if (questions.length < 3) {
                    questions = questions.concat(
                        sampleQuestions.filter(q => q.category !== selectedCategory).slice(0, 5 - questions.length)
                    );
                }
            }
            
            // Ù†Ø­Ø¯Ø¯ 5 Ø£Ø³Ø¦Ù„Ø© ÙÙ‚Ø· Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„ÙØ±Ø¯ÙŠØ©
            questions = questions.slice(0, 5);
            
            console.log('ØªÙ… ØªØ­Ù…ÙŠÙ„', questions.length, 'Ø³Ø¤Ø§Ù„ Ù…Ù† Ù‚Ø³Ù…:', selectedCategory);
            document.getElementById('totalQuestions').textContent = questions.length;
        }

        // ========== Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ==========
        function startGame() {
            console.log('Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ù„Ø§Ø¹Ø¨:', playerName, '| Ø§Ù„Ù‚Ø³Ù…:', selectedCategory, '| Ø§Ù„Ù…Ø´Ø±Ù:', isAdmin);
            loadCurrentQuestion();
            startTimer();
        }

        // ========== Ø§Ù„Ù…Ø¤Ù‚Øª ==========
        function startTimer() {
            clearInterval(timerInterval);
            timeLeft = 30;
            document.getElementById('timerDisplay').textContent = timeLeft;
            
            timerInterval = setInterval(() => {
                if (timeLeft > 0 && !answered) {
                    timeLeft--;
                    document.getElementById('timerDisplay').textContent = timeLeft;
                    
                    // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù…Ø¤Ù‚Øª Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ‚Ù„ Ø§Ù„ÙˆÙ‚Øª
                    if (timeLeft <= 10) {
                        document.getElementById('timerDisplay').style.color = '#F44336';
                    } else if (timeLeft <= 20) {
                        document.getElementById('timerDisplay').style.color = '#FF9800';
                    }
                } else if (timeLeft === 0 && !answered) {
                    clearInterval(timerInterval);
                    // Ø§Ù„ÙˆÙ‚Øª Ø§Ù†ØªÙ‡Ù‰ Ø¨Ø¯ÙˆÙ† Ø¥Ø¬Ø§Ø¨Ø©
                    stats.skipped++;
                    updateStats();
                    showCorrectAnswer();
                    playSound('time');
                }
            }, 1000);
        }

        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ ==========
        function loadCurrentQuestion() {
            if (currentQuestionIndex >= questions.length) {
                endGame();
                return;
            }
            
            const q = questions[currentQuestionIndex];
            document.getElementById('questionText').textContent = q.question;
            document.getElementById('questionCounter').textContent = currentQuestionIndex + 1;
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
            answered = false;
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('skipBtn').style.display = 'block';
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            for (let i = 0; i < 4; i++) {
                const btn = document.getElementById(`option${i+1}`);
                btn.textContent = q.options[i];
                btn.className = 'option-btn';
                btn.disabled = false;
            }
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
            document.getElementById('timerDisplay').style.color = '#ffd700';
        }

        // ========== Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ==========
        function checkAnswer(selected) {
            if (answered) return;
            
            answered = true;
            clearInterval(timerInterval);
            
            const correct = questions[currentQuestionIndex].correct;
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© ÙˆØ§Ù„Ø®Ø§Ø·Ø¦Ø©
            for (let i = 1; i <= 4; i++) {
                const btn = document.getElementById(`option${i}`);
                btn.disabled = true;
                
                if (i === correct) {
                    btn.classList.add('correct');
                } else if (i === selected) {
                    btn.classList.add('wrong');
                }
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            if (selected === correct) {
                const points = questions[currentQuestionIndex].points || 10;
                score += points;
                stats.correct++;
                
                // ØªØ£Ø«ÙŠØ± Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                document.getElementById(`option${correct}`).style.animation = 'pulse 0.5s 3';
                playSound('correct');
                
                // ØªØ£Ø«ÙŠØ± Ø§Ù‡ØªØ²Ø§Ø² Ø¨Ø³ÙŠØ·
                document.getElementById('scoreDisplay').style.animation = 'pulse 0.3s 2';
                setTimeout(() => {
                    document.getElementById('scoreDisplay').style.animation = '';
                }, 600);
            } else {
                stats.wrong++;
                playSound('wrong');
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            document.getElementById('scoreDisplay').textContent = score;
            updateStats();
            
            // Ø¹Ø±Ø¶ Ø²Ø± Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
            document.getElementById('nextBtn').style.display = 'block';
            document.getElementById('skipBtn').style.display = 'none';
        }

        // ========== ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØµÙˆØ§Øª ==========
        function playSound(type) {
            // ÙÙŠ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŒ Ø³Ù†Ø¶ÙŠÙ Ù…Ù„ÙØ§Øª ØµÙˆØªÙŠØ©
            // Ø­Ø§Ù„ÙŠØ§Ù‹ Ù†Ø³ØªØ®Ø¯Ù… Ù†ØºÙ…Ø© Ø¨Ø³ÙŠØ·Ø©
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                if (type === 'correct') {
                    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                } else if (type === 'wrong') {
                    oscillator.frequency.setValueAtTime(349.23, audioContext.currentTime); // F4
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                } else if (type === 'time') {
                    oscillator.frequency.setValueAtTime(261.63, audioContext.currentTime); // C4
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                }
                
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.3);
                
            } catch (e) {
                console.log('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:', e);
            }
        }

        // ========== ØªØ®Ø·ÙŠ Ø§Ù„Ø³Ø¤Ø§Ù„ ==========
        function skipQuestion() {
            if (answered) return;
            
            clearInterval(timerInterval);
            stats.skipped++;
            updateStats();
            showCorrectAnswer();
            
            answered = true;
            document.getElementById('nextBtn').style.display = 'block';
            document.getElementById('skipBtn').style.display = 'none';
            
            playSound('time');
        }

        // ========== Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© ==========
        function showCorrectAnswer() {
            const correct = questions[currentQuestionIndex].correct;
            
            for (let i = 1; i <= 4; i++) {
                const btn = document.getElementById(`option${i}`);
                btn.disabled = true;
                
                if (i === correct) {
                    btn.classList.add('correct');
                }
            }
        }

        // ========== ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ==========
        function updateStats() {
            document.getElementById('correctCount').textContent = stats.correct;
            document.getElementById('wrongCount').textContent = stats.wrong;
            document.getElementById('skippedCount').textContent = stats.skipped;
        }

        // ========== Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ ==========
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex >= questions.length) {
                endGame();
            } else {
                loadCurrentQuestion();
                startTimer();
            }
        }

        // ========== Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ==========
        function endGame() {
            clearInterval(timerInterval);
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø´ØªØ±ÙƒØ§Ù‹ Ø£Ùˆ Ù…Ø´Ø±ÙØ§Ù‹
            const isSubscribed = localStorage.getItem('subscribed') === 'true';
            if (!isAdmin && !isSubscribed) {
                localStorage.setItem('trialUsed', 'true');
            }
            
            // Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø©
            saveScore(score, selectedCategory);
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            showResults();
        }

        // ========== Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ==========
        function saveScore(score, category) {
            const playerName = localStorage.getItem('playerName');
            if (!playerName) return;
            
            const scores = JSON.parse(localStorage.getItem('scores') || '[]');
            const newScore = {
                player: playerName,
                score: score,
                category: category,
                categoryName: getCategoryName(category),
                isAdmin: isAdmin,
                date: new Date().toISOString(),
                timestamp: Date.now()
            };
            
            scores.push(newScore);
            scores.sort((a, b) => b.score - a.score);
            const topScores = scores.slice(0, 10);
            
            localStorage.setItem('scores', JSON.stringify(topScores));
            console.log('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø©:', newScore);
        }

        // ========== Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ==========
        function showResults() {
            document.getElementById('finalScore').textContent = score;
            document.getElementById('finalCorrect').textContent = stats.correct;
            document.getElementById('finalWrong').textContent = stats.wrong;
            document.getElementById('finalSkipped').textContent = stats.skipped;
            document.getElementById('finalCategory').textContent = getCategoryName(selectedCategory);
            
            // ØªØ­Ø¯ÙŠØ¯ Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨
            let status = 'ØªØ¬Ø±Ø¨Ø© Ù…Ø¬Ø§Ù†ÙŠØ©';
            if (isAdmin) {
                status = 'Ø§Ù„Ù…Ø´Ø±Ù';
            } else if (localStorage.getItem('subscribed') === 'true') {
                status = 'Ø¹Ø¶Ùˆ Ø§Ù„Ù†Ø®Ø¨Ø©';
            } else if (localStorage.getItem('trialUsed') === 'true') {
                status = 'ØªØ¬Ø±Ø¨Ø© Ù…Ù†ØªÙ‡ÙŠØ©';
            }
            
            document.getElementById('finalStatus').textContent = status;
            
            document.getElementById('resultOverlay').style.display = 'flex';
            
            // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
            playSound('correct');
        }

        // ========== Ø§Ù„Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ==========
        function playAgain() {
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„ Ø´ÙŠØ¡
            currentQuestionIndex = 0;
            score = 0;
            stats = { correct: 0, wrong: 0, skipped: 0 };
            
            document.getElementById('scoreDisplay').textContent = score;
            updateStats();
            
            document.getElementById('resultOverlay').style.display = 'none';
            
            // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù…
            showCategorySelection();
        }

        // ========== Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ==========
        function goToHome() {
            window.location.href = 'index.html';
        }

        // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ø¨Ø¶ Ù„Ù„Ù€CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
            
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }
            
            @keyframes glow {
                0%, 100% { box-shadow: 0 0 5px rgba(255,215,0,0.5); }
                50% { box-shadow: 0 0 20px rgba(255,215,0,0.8); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>