<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø®Ø¨Ø© - Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„ÙØ±Ø¯ÙŠ</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Ù†Ø¸Ø§Ù… Ø³ÙŠÙ† Ø¬ÙŠÙ… Ù„Ù„Ø¹Ø¨Ø© */
        .s9a9im-game {
            max-width: 1000px;
            margin: 100px auto 50px;
            padding: 0 20px;
        }
        
        .game-mode-selector {
            display: flex;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .mode-card {
            flex: 1;
            min-width: 200px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: 0.3s;
            border: 2px solid rgba(0, 212, 255, 0.3);
        }
        
        .mode-card:hover {
            transform: translateY(-5px);
            border-color: #00d4ff;
            background: rgba(0, 212, 255, 0.1);
        }
        
        .mode-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #00d4ff;
        }
        
        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ */
        .question-container {
            background: rgba(10, 25, 47, 0.8);
            padding: 40px;
            border-radius: 20px;
            margin: 40px 0;
            border: 3px solid #00d4ff;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .question-text {
            font-size: 1.8rem;
            line-height: 1.6;
            color: white;
            margin-bottom: 30px;
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .option-btn {
            padding: 20px;
            background: rgba(255, 255, 255, 0.07);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: white;
            font-size: 1.2rem;
            text-align: right;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }
        
        .option-btn:hover {
            background: rgba(0, 212, 255, 0.15);
            border-color: #00d4ff;
            transform: translateY(-2px);
        }
        
        .option-btn.correct {
            background: rgba(46, 213, 115, 0.2);
            border-color: #2ed573;
            color: #2ed573;
        }
        
        .option-btn.incorrect {
            background: rgba(255, 71, 87, 0.2);
            border-color: #ff4757;
            color: #ff4757;
        }
        
        /* Ø§Ù„ØªØ§ÙŠÙ…Ø± */
        .timer-container {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .timer-bar {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #0099ff);
            width: 100%;
            transition: width 1s linear;
        }
        
        .timer-text {
            text-align: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: #00d4ff;
            margin: 10px 0;
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .stats-bar {
            display: flex;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #00d4ff;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #aaa;
        }
        
        /* Ø§Ù„Ù†ØªÙŠØ¬Ø© */
        .result-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        
        .result-card {
            background: linear-gradient(135deg, #0c2461, #1e3799);
            padding: 50px;
            border-radius: 25px;
            text-align: center;
            border: 3px solid #00d4ff;
            max-width: 600px;
            width: 90%;
        }
        
        .result-score {
            font-size: 4rem;
            color: #00d4ff;
            font-weight: bold;
            margin: 20px 0;
        }
        
        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª */
        .level-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }
        
        .level-bar {
            flex: 1;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .level-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #0099ff);
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <!-- ===== NAVBAR ===== -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <i class="fas fa-crown"></i>
                <span>ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø®Ø¨Ø©</span>
            </a>
            
            <div class="nav-links">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </a>
                <a href="game.html" class="nav-link active">
                    <i class="fas fa-gamepad"></i> Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„ÙØ±Ø¯ÙŠØ©
                </a>
                <a href="team-game.html" class="nav-link">
                    <i class="fas fa-users"></i> Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©
                </a>
                <a href="challenges.html" class="nav-link">
                    <i class="fas fa-trophy"></i> Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª
                </a>
                <a href="leaderboard.html" class="nav-link">
                    <i class="fas fa-chart-line"></i> Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†
                </a>
            </div>
        </div>
    </nav>

    <!-- ===== GAME AREA ===== -->
    <div class="s9a9im-game">
        <!-- Ø§Ø®ØªÙŠØ§Ø± Ù†Ù…Ø· Ø§Ù„Ù„Ø¹Ø¨ -->
        <div class="game-mode-selector" id="modeSelector">
            <div class="mode-card" onclick="startGame('quick')">
                <div class="mode-icon">âš¡</div>
                <h3>Ø§Ù„Ø¹Ø¨ Ø³Ø±ÙŠØ¹</h3>
                <p>10 Ø£Ø³Ø¦Ù„Ø© - 15 Ø«Ø§Ù†ÙŠØ© Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„</p>
                <p class="stat-value">1,000 Ù†Ù‚Ø·Ø©</p>
            </div>
            
            <div class="mode-card" onclick="startGame('normal')">
                <div class="mode-icon">ğŸ¯</div>
                <h3>Ø§Ù„Ø¹Ø¨ Ø¹Ø§Ø¯ÙŠ</h3>
                <p>20 Ø³Ø¤Ø§Ù„ - 30 Ø«Ø§Ù†ÙŠØ© Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„</p>
                <p class="stat-value">2,500 Ù†Ù‚Ø·Ø©</p>
            </div>
            
            <div class="mode-card" onclick="startGame('challenge')">
                <div class="mode-icon">ğŸ†</div>
                <h3>ØªØ­Ø¯ÙŠ</h3>
                <p>Ø£Ø³Ø¦Ù„Ø© ØµØ¹Ø¨Ø© - ÙˆÙ‚Øª Ù…Ø­Ø¯ÙˆØ¯</p>
                <p class="stat-value">5,000+ Ù†Ù‚Ø·Ø©</p>
            </div>
        </div>

        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
        <div id="gameArea" style="display: none;">
            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-value" id="currentScore">0</div>
                    <div class="stat-label">Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="streakCount">0</div>
                    <div class="stat-label">Ø§Ù„ØªØ³Ù„Ø³Ù„</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="questionNumber">1/10</div>
                    <div class="stat-label">Ø§Ù„Ø³Ø¤Ø§Ù„</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="multiplier">1x</div>
                    <div class="stat-label">Ø§Ù„Ù…Ø¶Ø§Ø¹Ù</div>
                </div>
            </div>

            <!-- Ø§Ù„ØªØ§ÙŠÙ…Ø± -->
            <div class="timer-container">
                <div class="timer-bar" id="timerBar"></div>
            </div>
            <div class="timer-text" id="timerDisplay">30</div>

            <!-- Ø§Ù„Ø³Ø¤Ø§Ù„ -->
            <div class="question-container">
                <div class="question-header">
                    <div>
                        <span class="category-badge" id="questionCategory">Ø§Ù„Ø¹Ù„Ù…</span>
                        <span class="difficulty-badge" id="questionDifficulty">Ø³Ù‡Ù„</span>
                    </div>
                    <div class="level-indicator">
                        <span>Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="playerLevel">1</span></span>
                        <div class="level-bar">
                            <div class="level-fill" id="levelProgress" style="width: 10%"></div>
                        </div>
                    </div>
                </div>
                
                <div class="question-text" id="questionText">
                    ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„...
                </div>
                
                <div class="options-grid" id="optionsGrid">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </div>
            </div>

            <!-- Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ -->
            <div style="text-align: center; margin-top: 30px;">
                <button id="nextBtn" class="btn btn-primary" style="padding: 15px 40px; font-size: 1.2rem; display: none;">
                    <i class="fas fa-arrow-right"></i> Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
                </button>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
    <div class="result-overlay" id="resultOverlay" style="display: none;">
        <div class="result-card">
            <h2 style="color: #00d4ff; font-size: 2.5rem; margin-bottom: 20px;">ğŸ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬ÙˆÙ„Ø©!</h2>
            
            <div class="result-score" id="finalScore">0</div>
            <p style="color: #aaa; font-size: 1.2rem;">Ù†Ù‚Ø·Ø©</p>
            
            <div style="margin: 30px 0;">
                <div style="display: flex; justify-content: space-around; margin: 20px 0;">
                    <div>
                        <div style="font-size: 2rem; color: #2ed573;" id="correctCount">0</div>
                        <div style="color: #aaa;">Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©</div>
                    </div>
                    <div>
                        <div style="font-size: 2rem; color: #ff4757;" id="wrongCount">0</div>
                        <div style="color: #aaa;">Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©</div>
                    </div>
                    <div>
                        <div style="font-size: 2rem; color: #ffa502;" id="timeBonus">0</div>
                        <div style="color: #aaa;">Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ÙˆÙ‚Øª</div>
                    </div>
                </div>
            </div>
            
            <div style="margin: 25px 0; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: 10px;">
                <h3 style="color: #00d4ff; margin-bottom: 10px;">ğŸ†• Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¬Ø¯ÙŠØ¯</h3>
                <div style="font-size: 1.5rem; color: #ffd700;" id="newLevel">Ù…Ø³ØªÙˆÙ‰ 2</div>
                <div style="color: #aaa;" id="levelReward">Ù…ÙƒØ§ÙØ£Ø©: 1000 Ù†Ù‚Ø·Ø© Ø¥Ø¶Ø§ÙÙŠØ©</div>
            </div>
            
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="playAgain()">
                    <i class="fas fa-redo"></i> Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                </button>
                <button class="btn btn-secondary" onclick="goToHome()">
                    <i class="fas fa-home"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </button>
                <button class="btn" style="background: linear-gradient(45deg, #ffd700, #ffa500);" onclick="shareResult()">
                    <i class="fas fa-share"></i> Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªÙŠØ¬Ø©
                </button>
            </div>
        </div>
    </div>

    <script>
        // Ù†Ø¸Ø§Ù… Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø«Ù„ Ø³ÙŠÙ† Ø¬ÙŠÙ…
        class EliteChallengeGame {
            constructor() {
                this.gameMode = 'normal';
                this.score = 0;
                this.streak = 0;
                this.multiplier = 1;
                this.level = 1;
                this.experience = 0;
                this.totalQuestions = 10;
                this.currentQuestion = 0;
                this.correctAnswers = 0;
                this.wrongAnswers = 0;
                this.timeBonus = 0;
                this.timeLeft = 30;
                this.timer = null;
                this.isGameActive = false;
                
                // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù„Ø¹Ø¨
                this.modes = {
                    quick: { questions: 10, time: 15, basePoints: 100 },
                    normal: { questions: 20, time: 30, basePoints: 250 },
                    challenge: { questions: 15, time: 20, basePoints: 500 }
                };
                
                // Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
                this.levelSystem = [
                    { level: 1, name: "Ø§Ù„Ù…Ø¨ØªØ¯Ø¦", requiredXP: 0, badge: "ğŸ¥š", color: "#aaa" },
                    { level: 2, name: "Ø§Ù„Ù‡Ø§ÙˆÙŠ", requiredXP: 1000, badge: "ğŸ£", color: "#55efc4" },
                    { level: 3, name: "Ø§Ù„Ù…ØªÙˆØ³Ø·", requiredXP: 3000, badge: "ğŸ¥", color: "#74b9ff" },
                    { level: 4, name: "Ø§Ù„Ù…ØªÙ‚Ø¯Ù…", requiredXP: 7000, badge: "ğŸ¦…", color: "#a29bfe" },
                    { level: 5, name: "Ø§Ù„Ø®Ø¨ÙŠØ±", requiredXP: 15000, badge: "ğŸ‘‘", color: "#ffd700" },
                    { level: 6, name: "Ø§Ù„Ø£Ø³Ø·ÙˆØ±Ø©", requiredXP: 30000, badge: "â­", color: "#ff6b81" }
                ];
                
                // Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
                this.questions = this.loadQuestions();
            }
            
            loadQuestions() {
                return [
                    {
                        id: 1,
                        question: "Ù…Ø§ Ù‡Ùˆ Ø£Ø³Ø±Ø¹ Ø­ÙŠÙˆØ§Ù† Ø¨Ø±ÙŠ ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ",
                        category: "Ø¹Ù„Ù… Ø§Ù„Ø­ÙŠÙˆØ§Ù†",
                        difficulty: "easy",
                        options: ["Ø§Ù„ÙÙ‡Ø¯", "Ø§Ù„Ø£Ø³Ø¯", "Ø§Ù„Ù†Ù…Ø±", "Ø§Ù„Ø°Ø¦Ø¨"],
                        correct: 0,
                        explanation: "Ø§Ù„ÙÙ‡Ø¯ Ù‡Ùˆ Ø£Ø³Ø±Ø¹ Ø­ÙŠÙˆØ§Ù† Ø¨Ø±ÙŠ Ø­ÙŠØ« ØªØµÙ„ Ø³Ø±Ø¹ØªÙ‡ Ø¥Ù„Ù‰ 112 ÙƒÙ…/Ø³Ø§Ø¹Ø©"
                    },
                    {
                        id: 2,
                        question: "ÙÙŠ Ø£ÙŠ Ø¹Ø§Ù… Ù‡Ø¨Ø· Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ø£ÙˆÙ„ Ù…Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ù…Ø±ØŸ",
                        category: "Ø§Ù„ØªØ§Ø±ÙŠØ®",
                        difficulty: "medium",
                        options: ["1965", "1969", "1972", "1958"],
                        correct: 1,
                        explanation: "Ù‡Ø¨Ø·Øª Ù…Ø±ÙƒØ¨Ø© Ø£Ø¨ÙˆÙ„Ùˆ 11 Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ù…Ø± ÙÙŠ 20 ÙŠÙˆÙ„ÙŠÙˆ 1969"
                    },
                    {
                        id: 3,
                        question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ø§Ù„Ø°ÙŠ Ø±Ù…Ø²Ù‡ 'Au'ØŸ",
                        category: "Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
                        difficulty: "easy",
                        options: ["Ø§Ù„ÙØ¶Ø©", "Ø§Ù„Ø°Ù‡Ø¨", "Ø§Ù„Ø£Ù„ÙˆÙ…Ù†ÙŠÙˆÙ…", "Ø§Ù„Ø­Ø¯ÙŠØ¯"],
                        correct: 1,
                        explanation: "Au Ù‡Ùˆ Ø±Ù…Ø² Ø§Ù„Ø°Ù‡Ø¨ (Aurum) ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ±ÙŠ"
                    },
                    {
                        id: 4,
                        question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ù„Ø§Ø¹Ø¨ÙŠ ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù… ÙÙŠ ÙƒÙ„ ÙØ±ÙŠÙ‚ØŸ",
                        category: "Ø§Ù„Ø±ÙŠØ§Ø¶Ø©",
                        difficulty: "easy",
                        options: ["10", "11", "12", "9"],
                        correct: 1,
                        explanation: "ÙŠØªÙƒÙˆÙ† ÙØ±ÙŠÙ‚ ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù… Ù…Ù† 11 Ù„Ø§Ø¹Ø¨Ø§Ù‹"
                    },
                    {
                        id: 5,
                        question: "Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ù„Ù Ø±ÙˆØ§ÙŠØ© 'Ø§Ù„Ø¨Ø¤Ø³Ø§Ø¡'ØŸ",
                        category: "Ø§Ù„Ø£Ø¯Ø¨",
                        difficulty: "hard",
                        options: ["ÙÙŠÙƒØªÙˆØ± Ù‡ÙˆØ¬Ùˆ", "ØªØ´Ø§Ø±Ù„Ø² Ø¯ÙŠÙƒÙ†Ø²", "Ù„ÙŠÙˆ ØªÙˆÙ„Ø³ØªÙˆÙŠ", "Ø¬ÙŠ Ø¯ÙŠ Ù…ÙˆØ¨Ø§Ø³Ø§Ù†"],
                        correct: 0,
                        explanation: "Ø±ÙˆØ§ÙŠØ© Ø§Ù„Ø¨Ø¤Ø³Ø§Ø¡ Ù…Ù† ØªØ£Ù„ÙŠÙ Ø§Ù„ÙƒØ§ØªØ¨ Ø§Ù„ÙØ±Ù†Ø³ÙŠ ÙÙŠÙƒØªÙˆØ± Ù‡ÙˆØ¬Ùˆ"
                    }
                ];
            }
            
            startGame(mode) {
                this.gameMode = mode;
                this.resetGame();
                this.isGameActive = true;
                
                // Ø¥Ø®ÙØ§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù†Ù…Ø· ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù„Ø¹Ø¨Ø©
                document.getElementById('modeSelector').style.display = 'none';
                document.getElementById('gameArea').style.display = 'block';
                
                // ØªØ¹ÙŠÙŠÙ† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ù…Ø·
                const modeSettings = this.modes[mode];
                this.totalQuestions = modeSettings.questions;
                this.timeLeft = modeSettings.time;
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
                this.updateUI();
                this.showNextQuestion();
                this.startTimer();
            }
            
            resetGame() {
                this.score = 0;
                this.streak = 0;
                this.multiplier = 1;
                this.currentQuestion = 0;
                this.correctAnswers = 0;
                this.wrongAnswers = 0;
                this.timeBonus = 0;
                this.timeLeft = this.modes[this.gameMode].time;
            }
            
            showNextQuestion() {
                if (this.currentQuestion >= this.totalQuestions) {
                    this.endGame();
                    return;
                }
                
                this.currentQuestion++;
                document.getElementById('questionNumber').textContent = 
                    `${this.currentQuestion}/${this.totalQuestions}`;
                
                // Ø§Ø®ØªÙŠØ§Ø± Ø³Ø¤Ø§Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
                const randomIndex = Math.floor(Math.random() * this.questions.length);
                const q = this.questions[randomIndex];
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„
                document.getElementById('questionText').textContent = q.question;
                document.getElementById('questionCategory').textContent = q.category;
                document.getElementById('questionDifficulty').textContent = 
                    q.difficulty === 'easy' ? 'Ø³Ù‡Ù„' : 
                    q.difficulty === 'medium' ? 'Ù…ØªÙˆØ³Ø·' : 'ØµØ¹Ø¨';
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
                const optionsGrid = document.getElementById('optionsGrid');
                optionsGrid.innerHTML = '';
                
                q.options.forEach((option, index) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.textContent = option;
                    btn.onclick = () => this.checkAnswer(index, q.correct, q.explanation);
                    optionsGrid.appendChild(btn);
                });
                
                document.getElementById('nextBtn').style.display = 'none';
            }
            
            checkAnswer(selected, correct, explanation) {
                if (!this.isGameActive) return;
                
                const buttons = document.querySelectorAll('.option-btn');
                buttons.forEach(btn => btn.disabled = true);
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© ÙˆØ§Ù„Ø®Ø§Ø·Ø¦Ø©
                buttons.forEach((btn, index) => {
                    if (index === correct) {
                        btn.classList.add('correct');
                    } else if (index === selected && selected !== correct) {
                        btn.classList.add('incorrect');
                    }
                });
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©
                if (selected === correct) {
                    this.correctAnswers++;
                    this.streak++;
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¶Ø§Ø¹Ù
                    if (this.streak >= 3) this.multiplier = 2;
                    if (this.streak >= 5) this.multiplier = 3;
                    if (this.streak >= 10) this.multiplier = 5;
                    
                    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
                    const basePoints = this.modes[this.gameMode].basePoints;
                    const timeBonus = Math.floor(this.timeLeft * 2);
                    const points = (basePoints + timeBonus) * this.multiplier;
                    
                    this.score += points;
                    this.timeBonus += timeBonus;
                    
                    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø©
                    const pointsPopup = document.createElement('div');
                    pointsPopup.textContent = `+${points}`;
                    pointsPopup.style.cssText = `
                        position: absolute;
                        top: -30px;
                        right: 50%;
                        transform: translateX(50%);
                        background: gold;
                        color: black;
                        padding: 5px 10px;
                        border-radius: 20px;
                        font-weight: bold;
                        font-size: 1.2rem;
                        z-index: 10;
                    `;
                    buttons[correct].appendChild(pointsPopup);
                    
                    // Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø±Ø©
                    this.addExperience(points);
                } else {
                    this.wrongAnswers++;
                    this.streak = 0;
                    this.multiplier = 1;
                    
                    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªÙØ³ÙŠØ±
                    const explanationDiv = document.createElement('div');
                    explanationDiv.textContent = explanation;
                    explanationDiv.style.cssText = `
                        margin-top: 15px;
                        padding: 10px;
                        background: rgba(255, 71, 87, 0.1);
                        border-radius: 8px;
                        border-right: 3px solid #ff4757;
                        color: #ffa8b6;
                    `;
                    document.querySelector('.question-container').appendChild(explanationDiv);
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
                this.updateUI();
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ
                document.getElementById('nextBtn').style.display = 'block';
                document.getElementById('nextBtn').onclick = () => {
                    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙØ³ÙŠØ± Ø¥Ø°Ø§ Ù…ÙˆØ¬ÙˆØ¯
                    const oldExplanation = document.querySelector('.question-container div:last-child');
                    if (oldExplanation && oldExplanation.style.borderRight === '3px solid rgb(255, 71, 87)') {
                        oldExplanation.remove();
                    }
                    
                    this.timeLeft = this.modes[this.gameMode].time;
                    this.showNextQuestion();
                    this.startTimer();
                };
            }
            
            startTimer() {
                clearInterval(this.timer);
                const modeTime = this.modes[this.gameMode].time;
                this.timeLeft = modeTime;
                document.getElementById('timerDisplay').textContent = this.timeLeft;
                document.getElementById('timerBar').style.width = '100%';
                
                this.timer = setInterval(() => {
                    this.timeLeft--;
                    document.getElementById('timerDisplay').textContent = this.timeLeft;
                    document.getElementById('timerBar').style.width = 
                        `${(this.timeLeft / modeTime) * 100}%`;
                    
                    if (this.timeLeft <= 0) {
                        clearInterval(this.timer);
                        this.timeUp();
                    }
                }, 1000);
            }
            
            timeUp() {
                if (!this.isGameActive) return;
                
                const buttons = document.querySelectorAll('.option-btn');
                buttons.forEach(btn => {
                    btn.disabled = true;
                    if (!btn.classList.contains('correct') && !btn.classList.contains('incorrect')) {
                        btn.classList.add('incorrect');
                    }
                });
                
                document.getElementById('nextBtn').style.display = 'block';
                document.getElementById('nextBtn').onclick = () => {
                    this.timeLeft = this.modes[this.gameMode].time;
                    this.showNextQuestion();
                    this.startTimer();
                };
            }
            
            addExperience(points) {
                this.experience += Math.floor(points / 10);
                this.checkLevelUp();
                this.updateLevelUI();
            }
            
            checkLevelUp() {
                const currentLevel = this.levelSystem[this.level - 1];
                const nextLevel = this.levelSystem[this.level];
                
                if (nextLevel && this.experience >= nextLevel.requiredXP) {
                    this.level++;
                    return true;
                }
                return false;
            }
            
            updateLevelUI() {
                document.getElementById('playerLevel').textContent = this.level;
                
                const currentLevel = this.levelSystem[this.level - 1];
                const nextLevel = this.levelSystem[this.level];
                
                if (nextLevel) {
                    const currentLevelXP = currentLevel.requiredXP;
                    const nextLevelXP = nextLevel.requiredXP;
                    const progress = ((this.experience - currentLevelXP) / (nextLevelXP - currentLevelXP)) * 100;
                    document.getElementById('levelProgress').style.width = `${Math.min(progress, 100)}%`;
                }
            }
            
            updateUI() {
                document.getElementById('currentScore').textContent = this.score.toLocaleString();
                document.getElementById('streakCount').textContent = this.streak;
                document.getElementById('multiplier').textContent = `${this.multiplier}x`;
            }
            
            endGame() {
                this.isGameActive = false;
                clearInterval(this.timer);
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
                const finalScore = this.score;
                
                // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø©
                document.getElementById('finalScore').textContent = finalScore.toLocaleString();
                document.getElementById('correctCount').textContent = this.correctAnswers;
                document.getElementById('wrongCount').textContent = this.wrongAnswers;
                document.getElementById('timeBonus').textContent = this.timeBonus;
                
                // Ù…Ø³ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯
                const leveledUp = this.checkLevelUp();
                if (leveledUp) {
                    const newLevelData = this.levelSystem[this.level - 1];
                    document.getElementById('newLevel').textContent = `Ù…Ø³ØªÙˆÙ‰ ${newLevelData.level}: ${newLevelData.name}`;
                    document.getElementById('levelReward').textContent = `Ù…ÙƒØ§ÙØ£Ø©: ${newLevelData.badge} + ${1000 * newLevelData.level} Ù†Ù‚Ø·Ø©`;
                } else {
                    document.getElementById('newLevel').textContent = `Ù…Ø³ØªÙˆÙ‰ ${this.level}`;
                    document.getElementById('levelReward').textContent = `ØªØ§Ø¨Ø¹ Ø§Ù„Ù„Ø¹Ø¨ Ù„Ù„Ø§Ø±ØªÙ‚Ø§Ø¡ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ!`;
                }
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø©
                document.getElementById('resultOverlay').style.display = 'flex';
            }
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        let game;
        
        function initGame() {
            game = new EliteChallengeGame();
            console.log('ğŸ® Ù†Ø¸Ø§Ù… ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø®Ø¨Ø© Ø¬Ø§Ù‡Ø² (Ù†Ù…Ø· Ø³ÙŠÙ† Ø¬ÙŠÙ…)');
        }
        
        function startGame(mode) {
            if (!game) initGame();
            game.startGame(mode);
        }
        
        function playAgain() {
            document.getElementById('resultOverlay').style.display = 'none';
            document.getElementById('gameArea').style.display = 'none';
            document.getElementById('modeSelector').style.display = 'flex';
            initGame();
        }
        
        function goToHome() {
            window.location.href = 'index.html';
        }
        
        function shareResult() {
            const score = document.getElementById('finalScore').textContent;
            const level = document.getElementById('newLevel').textContent;
            const message = `ğŸ® Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${score} Ù†Ù‚Ø·Ø© ÙÙŠ ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø®Ø¨Ø© ÙˆÙˆØµÙ„Øª Ø¥Ù„Ù‰ ${level}! Ø¬Ø±Ø¨ Ø§Ù„Ù„Ø¹Ø¨Ø©: ${window.location.origin}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Ù†ØªÙŠØ¬Ø© ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø®Ø¨Ø©',
                    text: message,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(message);
                alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©!');
            }
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>