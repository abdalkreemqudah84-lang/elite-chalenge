<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <!-- Ø¨Ø¹Ø¯ style.css -->
<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="firebase-config.js"></script>  <!-- Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¶Ø§ÙØ© Ø£Ø³Ø¦Ù„Ø© - ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø®Ø¨Ø©</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: #f5f5f5; color: #333; padding: 20px; direction: rtl; }
        
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        h1 { color: #1a237e; margin-bottom: 20px; text-align: center; }
        
        .form-group { margin-bottom: 20px; }
        
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #1a237e; }
        
        input, select, textarea { 
            width: 100%; 
            padding: 12px; 
            border: 2px solid #ddd; 
            border-radius: 8px; 
            font-size: 16px; 
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus { 
            border-color: #1a237e; 
            outline: none; 
        }
        
        .btn { 
            background: linear-gradient(135deg, #1a237e, #311b92); 
            color: white; 
            border: none; 
            padding: 15px 30px; 
            border-radius: 25px; 
            font-size: 18px; 
            cursor: pointer; 
            font-weight: bold; 
            margin: 10px 5px;
            transition: all 0.3s;
        }
        
        .btn:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(26, 35, 126, 0.3); }
        
        .btn-success { background: linear-gradient(135deg, #4CAF50, #2E7D32); }
        
        .btn-danger { background: linear-gradient(135deg, #F44336, #C62828); }
        
        .status { 
            padding: 15px; 
            border-radius: 8px; 
            margin: 15px 0; 
            text-align: center;
            font-weight: bold;
        }
        
        .success { background: #E8F5E9; color: #2E7D32; border: 1px solid #4CAF50; }
        .error { background: #FFEBEE; color: #C62828; border: 1px solid #F44336; }
        .loading { background: #FFF3E0; color: #EF6C00; border: 1px solid #FF9800; }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-database"></i> Ø¥Ø¶Ø§ÙØ© Ø£Ø³Ø¦Ù„Ø© Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h1>
        
        <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ -->
        <div id="connectionStatus" class="status">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„...</div>
        
        <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„ -->
        <div class="form-group">
            <label for="question">Ø§Ù„Ø³Ø¤Ø§Ù„:</label>
            <textarea id="question" rows="3" placeholder="Ø£Ø¯Ø®Ù„ Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„..."></textarea>
        </div>
        
        <div class="form-group">
            <label for="category">Ø§Ù„Ù‚Ø³Ù…:</label>
            <select id="category">
                <option value="football">âš½ ÙƒØ±Ø© Ù‚Ø¯Ù…</option>
                <option value="movies">ğŸ¬ Ø£ÙÙ„Ø§Ù…</option>
                <option value="music">ğŸµ Ù…ÙˆØ³ÙŠÙ‚Ù‰</option>
                <option value="islamic">ğŸ•Œ Ø¥Ø³Ù„Ø§Ù…ÙŠØ§Øª</option>
                <option value="brands">ğŸ›ï¸ Ø¨Ø±Ø§Ù†Ø¯Ø§Øª</option>
                <option value="general">ğŸŒ Ø«Ù‚Ø§ÙØ© Ø¹Ø§Ù…Ø©</option>
                <option value="history">ğŸ›ï¸ Ø§Ù„ØªØ§Ø±ÙŠØ®</option>
                <option value="science">ğŸ”¬ Ø§Ù„Ø¹Ù„ÙˆÙ…</option>
                <option value="geography">ğŸ—ºï¸ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§</option>
                <option value="math">â— Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</option>
                <option value="arts">ğŸ¨ Ø§Ù„ÙÙ†ÙˆÙ†</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="difficulty">Ø§Ù„ØµØ¹ÙˆØ¨Ø©:</label>
            <select id="difficulty">
                <option value="easy">Ø³Ù‡Ù„ (10 Ù†Ù‚Ø§Ø·)</option>
                <option value="medium" selected>Ù…ØªÙˆØ³Ø· (15 Ù†Ù‚Ø·Ø©)</option>
                <option value="hard">ØµØ¹Ø¨ (20 Ù†Ù‚Ø·Ø©)</option>
            </select>
        </div>
        
        <!-- Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0;">
            <div class="form-group">
                <label for="option1">Ø§Ù„Ø®ÙŠØ§Ø± 1:</label>
                <input type="text" id="option1" placeholder="Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø£ÙˆÙ„">
            </div>
            <div class="form-group">
                <label for="option2">Ø§Ù„Ø®ÙŠØ§Ø± 2:</label>
                <input type="text" id="option2" placeholder="Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ">
            </div>
            <div class="form-group">
                <label for="option3">Ø§Ù„Ø®ÙŠØ§Ø± 3:</label>
                <input type="text" id="option3" placeholder="Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø«Ø§Ù„Ø«">
            </div>
            <div class="form-group">
                <label for="option4">Ø§Ù„Ø®ÙŠØ§Ø± 4:</label>
                <input type="text" id="option4" placeholder="Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø±Ø§Ø¨Ø¹">
            </div>
        </div>
        
        <div class="form-group">
            <label for="correctAnswer">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:</label>
            <select id="correctAnswer">
                <option value="1">Ø§Ù„Ø®ÙŠØ§Ø± 1</option>
                <option value="2">Ø§Ù„Ø®ÙŠØ§Ø± 2</option>
                <option value="3">Ø§Ù„Ø®ÙŠØ§Ø± 3</option>
                <option value="4">Ø§Ù„Ø®ÙŠØ§Ø± 4</option>
            </select>
        </div>
        
        <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->
        <div style="text-align: center; margin-top: 30px;">
            <button class="btn btn-success" onclick="addQuestion()">
                <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø¤Ø§Ù„
            </button>
            <button class="btn" onclick="addSampleQuestions()">
                <i class="fas fa-magic"></i> Ø¥Ø¶Ø§ÙØ© Ø£Ø³Ø¦Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©
            </button>
            <button class="btn btn-danger" onclick="clearAllQuestions()">
                <i class="fas fa-trash"></i> Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
            </button>
        </div>
        
        <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
        <div id="stats" style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
            <h3><i class="fas fa-chart-bar"></i> Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
            <div id="questionsCount">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª...</div>
        </div>
    </div>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    
    <script>
       
        let db;
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
            document.getElementById('connectionStatus').innerHTML = 
                '<div class="status success"><i class="fas fa-check-circle"></i> âœ… Ù…ØªØµÙ„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!</div>';
            loadStats();
        } catch (error) {
            document.getElementById('connectionStatus').innerHTML = 
                `<div class="status error"><i class="fas fa-times-circle"></i> âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}</div>`;
        }
        
        // Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„
        async function addQuestion() {
            const question = {
                text: document.getElementById('question').value,
                category: document.getElementById('category').value,
                difficulty: document.getElementById('difficulty').value,
                options: [
                    document.getElementById('option1').value,
                    document.getElementById('option2').value,
                    document.getElementById('option3').value,
                    document.getElementById('option4').value
                ],
                correctAnswer: parseInt(document.getElementById('correctAnswer').value),
                points: getPointsByDifficulty(document.getElementById('difficulty').value),
                createdAt: new Date().toISOString()
            };
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (!question.text || question.options.some(opt => !opt)) {
                alert('âŒ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„!');
                return;
            }
            
            try {
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø¤Ø§Ù„ Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                await db.collection('questions').add(question);
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
                document.getElementById('connectionStatus').innerHTML = 
                    `<div class="status success"><i class="fas fa-check-circle"></i> âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!</div>`;
                
                // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„
                clearForm();
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                loadStats();
                
            } catch (error) {
                document.getElementById('connectionStatus').innerHTML = 
                    `<div class="status error"><i class="fas fa-times-circle"></i> âŒ Ø®Ø·Ø£: ${error.message}</div>`;
            }
        }
        
        // Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© Ø£Ø³Ø¦Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        async function addSampleQuestions() {
            const sampleQuestions = [
                {
                    text: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù‡Ø¯Ø§Ù Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠ Ù„ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ",
                    category: "football",
                    difficulty: "easy",
                    options: ["Ù„ÙŠÙˆÙ†ÙŠÙ„ Ù…ÙŠØ³ÙŠ", "ÙƒØ±ÙŠØ³ØªÙŠØ§Ù†Ùˆ Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ", "Ù…ÙŠØ±ÙˆØ³Ù„Ø§Ù ÙƒÙ„ÙˆØ²Ù‡", "Ø¨ÙŠÙ„ÙŠÙ‡"],
                    correctAnswer: 3,
                    points: 10
                },
                {
                    text: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© ÙØ±Ù†Ø³Ø§ØŸ",
                    category: "general",
                    difficulty: "easy",
                    options: ["Ø¨Ø§Ø±ÙŠØ³", "Ù„Ù†Ø¯Ù†", "Ø±ÙˆÙ…Ø§", "Ø¨Ø±Ù„ÙŠÙ†"],
                    correctAnswer: 1,
                    points: 10
                },
                {
                    text: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø³ÙˆØ± Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ",
                    category: "islamic",
                    difficulty: "easy",
                    options: ["110", "112", "114", "120"],
                    correctAnswer: 3,
                    points: 10
                }
            ];
            
            document.getElementById('connectionStatus').innerHTML = 
                '<div class="status loading"><i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©...</div>';
            
            try {
                // Ø¥Ø¶Ø§ÙØ© ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
                for (const question of sampleQuestions) {
                    await db.collection('questions').add({
                        ...question,
                        createdAt: new Date().toISOString()
                    });
                }
                
                document.getElementById('connectionStatus').innerHTML = 
                    '<div class="status success"><i class="fas fa-check-circle"></i> âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© 3 Ø£Ø³Ø¦Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!</div>';
                
                loadStats();
                
            } catch (error) {
                document.getElementById('connectionStatus').innerHTML = 
                    `<div class="status error"><i class="fas fa-times-circle"></i> âŒ Ø®Ø·Ø£: ${error.message}</div>`;
            }
        }
        
        // Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        async function loadStats() {
            try {
                const snapshot = await db.collection('questions').get();
                const count = snapshot.size;
                
                // ØªØ¬Ù…ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù…
                const categories = {};
                snapshot.forEach(doc => {
                    const cat = doc.data().category;
                    categories[cat] = (categories[cat] || 0) + 1;
                });
                
                let statsHTML = `<p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: <strong>${count}</strong></p>`;
                statsHTML += `<p>Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…:</p><ul>`;
                
                for (const [cat, count] of Object.entries(categories)) {
                    statsHTML += `<li>${getCategoryName(cat)}: ${count} Ø³Ø¤Ø§Ù„</li>`;
                }
                
                statsHTML += `</ul>`;
                document.getElementById('questionsCount').innerHTML = statsHTML;
                
            } catch (error) {
                document.getElementById('questionsCount').innerHTML = 
                    `<p style="color: #F44336;">âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</p>`;
            }
        }
        
        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        async function clearAllQuestions() {
            if (!confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡!')) {
                return;
            }
            
            document.getElementById('connectionStatus').innerHTML = 
                '<div class="status loading"><i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ù…Ø³Ø­ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©...</div>';
            
            try {
                const snapshot = await db.collection('questions').get();
                const batch = db.batch();
                
                snapshot.forEach(doc => {
                    batch.delete(doc.ref);
                });
                
                await batch.commit();
                
                document.getElementById('connectionStatus').innerHTML = 
                    '<div class="status success"><i class="fas fa-check-circle"></i> âœ… ØªÙ… Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­!</div>';
                
                loadStats();
                
            } catch (error) {
                document.getElementById('connectionStatus').innerHTML = 
                    `<div class="status error"><i class="fas fa-times-circle"></i> âŒ Ø®Ø·Ø£: ${error.message}</div>`;
            }
        }
        
        // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
        function getPointsByDifficulty(difficulty) {
            switch(difficulty) {
                case 'easy': return 10;
                case 'medium': return 15;
                case 'hard': return 20;
                default: return 10;
            }
        }
        
        function getCategoryName(categoryCode) {
            const categories = {
                'football': 'ÙƒØ±Ø© Ù‚Ø¯Ù…',
                'movies': 'Ø£ÙÙ„Ø§Ù…',
                'music': 'Ù…ÙˆØ³ÙŠÙ‚Ù‰',
                'islamic': 'Ø¥Ø³Ù„Ø§Ù…ÙŠØ§Øª',
                'brands': 'Ø¨Ø±Ø§Ù†Ø¯Ø§Øª',
                'general': 'Ø«Ù‚Ø§ÙØ© Ø¹Ø§Ù…Ø©',
                'history': 'Ø§Ù„ØªØ§Ø±ÙŠØ®',
                'science': 'Ø§Ù„Ø¹Ù„ÙˆÙ…',
                'geography': 'Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§',
                'math': 'Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª',
                'arts': 'Ø§Ù„ÙÙ†ÙˆÙ†'
            };
            return categories[categoryCode] || categoryCode;
        }
        
        function clearForm() {
            document.getElementById('question').value = '';
            document.getElementById('option1').value = '';
            document.getElementById('option2').value = '';
            document.getElementById('option3').value = '';
            document.getElementById('option4').value = '';
            document.getElementById('correctAnswer').value = '1';
        }
    </script>
</body>
</html>