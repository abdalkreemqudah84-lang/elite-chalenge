<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘¥ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚ÙŠÙ† - ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø®Ø¨Ø©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: linear-gradient(135deg, #1a237e, #311b92); color: white; min-height: 100vh; direction: rtl; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }

        .setup-box { background: rgba(255,255,255,0.05); border-radius: 20px; padding: 30px; margin: 20px 0; border: 2px solid rgba(255,215,0,0.3); }

        .team-section { display: flex; gap: 30px; margin: 30px 0; flex-wrap: wrap; }
        .team { flex: 1; min-width: 300px; background: rgba(255,255,255,0.03); padding: 25px; border-radius: 15px; }
        .team-1 { border: 2px solid #4285F4; }
        .team-2 { border: 2px solid #EA4335; }

        input, select { width: 100%; padding: 12px; margin: 10px 0; border: 2px solid #ffd700; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; font-size: 16px; }

        .player-item { background: rgba(255,255,255,0.05); padding: 10px; margin: 5px 0; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }

        .btn { padding: 15px 30px; border: none; border-radius: 50px; font-size: 18px; cursor: pointer; margin: 10px; font-weight: bold; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, #ffd700, #ff6b00); color: #1a237e; }
        .btn-secondary { background: transparent; color: white; border: 2px solid #ffd700; }
        .btn:hover { transform: translateY(-3px); }

        .categories { display: flex; flex-wrap: wrap; gap: 10px; margin: 20px 0; }
        .category-tag { background: rgba(255,215,0,0.1); padding: 8px 15px; border-radius: 20px; border: 1px solid rgba(255,215,0,0.3); cursor: pointer; }
        .category-tag.selected { background: rgba(255,215,0,0.3); border-color: #ffd700; }

        .room-code { background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; text-align: center; font-size: 24px; letter-spacing: 5px; margin: 20px 0; }
        
        .remove-player { 
            background: #F44336; 
            color: white; 
            border: none; 
            width: 30px; 
            height: 30px; 
            border-radius: 50%; 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center;
        }
        
        @media (max-width: 768px) {
            .team-section {
                flex-direction: column;
            }
            
            .team {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-align: center; color: #ffd700; margin-bottom: 30px;">
            <i class="fas fa-users"></i> Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚ÙŠÙ†
        </h1>

        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØºØ±ÙØ© -->
        <div class="setup-box">
            <h3><i class="fas fa-door-open"></i> Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØºØ±ÙØ©</h3>
            <input type="text" id="roomName" placeholder="Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ© (Ù…Ø«Ù„Ø§Ù‹: Ù…Ù†Ø§ÙØ³Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©)" value="ØºØ±ÙØ© Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©">

            <div class="room-code" id="roomCodeDisplay">
                ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©: <span id="roomCode" style="font-weight: bold;">ABCD1234</span>
                <button onclick="copyRoomCode()" style="background: none; border: none; color: #ffd700; cursor: pointer; margin-right: 10px;">
                    <i class="fas fa-copy"></i> Ù†Ø³Ø®
                </button>
                <button onclick="generateNewCode()" style="background: none; border: none; color: #4CAF50; cursor: pointer;">
                    <i class="fas fa-sync-alt"></i> Ø¬Ø¯ÙŠØ¯
                </button>
            </div>

            <p style="color: #bbbbbb; text-align: center;">
                <i class="fas fa-share-alt"></i> Ø´Ø§Ø±Ùƒ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ Ù„ÙŠÙ†Ø¶Ù…ÙˆØ§
            </p>
        </div>

        <!-- Ø§Ù„ÙØ±ÙŠÙ‚ÙŠÙ† -->
        <div class="team-section">
            <!-- Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„ -->
            <div class="team team-1">
                <h3 style="color: #4285F4;"><i class="fas fa-user-friends"></i> Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„</h3>
                <input type="text" id="team1Name" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„" value="Ø§Ù„Ù†Ù…ÙˆØ±" style="border-color: #4285F4;">

                <h4 style="margin-top: 20px;"><i class="fas fa-users"></i> Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†:</h4>
                <div id="team1Players">
                    <div class="player-item">
                        <span>ğŸ‘‘ Ø£Ù†Øª (Ù‚Ø§Ø¦Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚)</span>
                        <input type="text" placeholder="Ø§Ø³Ù…Ùƒ" id="player1Name" style="width: 150px; padding: 5px;">
                    </div>
                </div>

                <button class="btn-secondary" onclick="addPlayer(1)" style="width: 100%; border-color: #4285F4; color: #4285F4;">
                    <i class="fas fa-user-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù„Ø§Ø¹Ø¨
                </button>
                <p style="color: #bbbbbb; font-size: 14px; text-align: center; margin-top: 10px;">(Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: 4 Ù„Ø§Ø¹Ø¨ÙŠÙ†)</p>
            </div>

            <!-- Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ -->
            <div class="team team-2">
                <h3 style="color: #EA4335;"><i class="fas fa-user-friends"></i> Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ</h3>
                <input type="text" id="team2Name" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ" value="Ø§Ù„Ø£Ø³ÙˆØ¯" style="border-color: #EA4335;">

                <h4 style="margin-top: 20px;"><i class="fas fa-users"></i> Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†:</h4>
                <div id="team2Players">
                    <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                </div>

                <button class="btn-secondary" onclick="addPlayer(2)" style="width: 100%; border-color: #EA4335; color: #EA4335;">
                    <i class="fas fa-user-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù„Ø§Ø¹Ø¨
                </button>
                <p style="color: #bbbbbb; font-size: 14px; text-align: center; margin-top: 10px;">(Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: 4 Ù„Ø§Ø¹Ø¨ÙŠÙ†)</p>
            </div>
        </div>

        <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© -->
        <div class="setup-box">
            <h3><i class="fas fa-cog"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©</h3>

            <div style="display: flex; gap: 20px; margin: 20px 0; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 200px;">
                    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©:</label>
                    <select id="questionCount">
                        <option value="5">5 Ø£Ø³Ø¦Ù„Ø©</option>
                        <option value="10" selected>10 Ø£Ø³Ø¦Ù„Ø©</option>
                        <option value="15">15 Ø£Ø³Ø¦Ù„Ø©</option>
                        <option value="20">20 Ø£Ø³Ø¦Ù„Ø©</option>
                    </select>
                </div>

                <div style="flex: 1; min-width: 200px;">
                    <label>ÙˆÙ‚Øª Ø§Ù„Ø³Ø¤Ø§Ù„:</label>
                    <select id="questionTime">
                        <option value="20">20 Ø«Ø§Ù†ÙŠØ©</option>
                        <option value="30" selected>30 Ø«Ø§Ù†ÙŠØ©</option>
                        <option value="45">45 Ø«Ø§Ù†ÙŠØ©</option>
                        <option value="60">60 Ø«Ø§Ù†ÙŠØ©</option>
                    </select>
                </div>

                <div style="flex: 1; min-width: 200px;">
                    <label>Ø§Ù„ØµØ¹ÙˆØ¨Ø©:</label>
                    <select id="difficulty">
                        <option value="easy">Ø³Ù‡Ù„</option>
                        <option value="medium" selected>Ù…ØªÙˆØ³Ø·</option>
                        <option value="hard">ØµØ¹Ø¨</option>
                    </select>
                </div>
            </div>

            <!-- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
            <h4><i class="fas fa-th-large"></i> Ø§Ø®ØªØ± Ø§Ù„Ø£Ù‚Ø³Ø§Ù…:</h4>
            <div class="categories" id="categoriesList">
                <div class="category-tag selected" data-category="all" onclick="toggleCategory('all')">Ø§Ù„ÙƒÙ„</div>
                <div class="category-tag" data-category="football" onclick="toggleCategory('football')">âš½ ÙƒØ±Ø© Ù‚Ø¯Ù…</div>
                <div class="category-tag" data-category="movies" onclick="toggleCategory('movies')">ğŸ¬ Ø£ÙÙ„Ø§Ù…</div>
                <div class="category-tag" data-category="music" onclick="toggleCategory('music')">ğŸµ Ù…ÙˆØ³ÙŠÙ‚Ù‰</div>
                <div class="category-tag" data-category="islamic" onclick="toggleCategory('islamic')">ğŸ•Œ Ø¥Ø³Ù„Ø§Ù…ÙŠØ§Øª</div>
                <div class="category-tag" data-category="brands" onclick="toggleCategory('brands')">ğŸ›ï¸ Ø¨Ø±Ø§Ù†Ø¯Ø§Øª</div>
                <div class="category-tag" data-category="general" onclick="toggleCategory('general')">ğŸŒ Ø«Ù‚Ø§ÙØ© Ø¹Ø§Ù…Ø©</div>
                
                <!-- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© -->
                <div class="category-tag" data-category="history" onclick="toggleCategory('history')">ğŸ›ï¸ Ø§Ù„ØªØ§Ø±ÙŠØ®</div>
                <div class="category-tag" data-category="science" onclick="toggleCategory('science')">ğŸ”¬ Ø§Ù„Ø¹Ù„ÙˆÙ…</div>
                <div class="category-tag" data-category="geography" onclick="toggleCategory('geography')">ğŸ—ºï¸ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§</div>
                <div class="category-tag" data-category="math" onclick="toggleCategory('math')">â— Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</div>
                <div class="category-tag" data-category="arts" onclick="toggleCategory('arts')">ğŸ¨ Ø§Ù„ÙÙ†ÙˆÙ†</div>
            </div>
            
            <p style="color: #bbbbbb; margin-top: 10px;">
                <i class="fas fa-info-circle"></i> Ø§Ø®ØªØ± "Ø§Ù„ÙƒÙ„" Ø£Ùˆ Ø§Ø®ØªØ± Ø£Ù‚Ø³Ø§Ù… Ù…Ø­Ø¯Ø¯Ø©
            </p>
        </div>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
        <div style="text-align: center; margin-top: 40px;">
            <button class="btn-secondary" onclick="goBack()">
                <i class="fas fa-arrow-right"></i> Ø±Ø¬ÙˆØ¹
            </button>

            <button class="btn-primary" onclick="startTeamGame()">
                <i class="fas fa-play"></i> Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©
            </button>
        </div>
    </div>

    <script>
        // ========== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ==========
        let gameConfig = {
            roomCode: generateRoomCode(),
            roomName: "ØºØ±ÙØ© Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©",
            team1: { 
                name: "Ø§Ù„Ù†Ù…ÙˆØ±", 
                players: [],
                score: 0,
                currentPlayerIndex: 0
            },
            team2: { 
                name: "Ø§Ù„Ø£Ø³ÙˆØ¯", 
                players: [],
                score: 0,
                currentPlayerIndex: 0
            },
            selectedCategories: ["all"],
            questionCount: 10,
            questionTime: 30,
            difficulty: "medium"
        };

        // ========== Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ==========
        window.onload = function() {
            // Ø¹Ø±Ø¶ ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©
            document.getElementById('roomCode').textContent = gameConfig.roomCode;
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù…Ù† localStorage
            const playerName = localStorage.getItem('playerName') || 'Ù„Ø§Ø¹Ø¨';
            document.getElementById('player1Name').value = playerName;
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„
            gameConfig.team1.players.push(playerName);
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
            updateTeamDisplay(1);
            
            console.log('âœ… Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙØ±ÙŠÙ‚ÙŠÙ† Ø¬Ø§Ù‡Ø²Ø©');
            console.log('ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©:', gameConfig.roomCode);
        };

        // ========== ØªÙˆÙ„ÙŠØ¯ ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ© ==========
        function generateRoomCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        // ========== ØªÙˆÙ„ÙŠØ¯ ÙƒÙˆØ¯ Ø¬Ø¯ÙŠØ¯ ==========
        function generateNewCode() {
            gameConfig.roomCode = generateRoomCode();
            document.getElementById('roomCode').textContent = gameConfig.roomCode;
            alert('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯: ' + gameConfig.roomCode);
        }

        // ========== Ù†Ø³Ø® ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ© ==========
        function copyRoomCode() {
            const code = document.getElementById('roomCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('âœ… ØªÙ… Ù†Ø³Ø® ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©: ' + code);
            }).catch(err => {
                // Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø© Ø¥Ø°Ø§ ÙØ´Ù„Øª
                const tempInput = document.createElement('input');
                tempInput.value = code;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
                alert('âœ… ØªÙ… Ù†Ø³Ø® ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©: ' + code);
            });
        }

        // ========== Ø¥Ø¶Ø§ÙØ© Ù„Ø§Ø¹Ø¨ ==========
        function addPlayer(teamNumber) {
            const teamDiv = document.getElementById(`team${teamNumber}Players`);
            const playerCount = teamDiv.children.length;
            
            if (playerCount >= 4) {
                alert('âŒ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 4 Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù„ÙƒÙ„ ÙØ±ÙŠÙ‚');
                return;
            }
            
            const playerDiv = document.createElement('div');
            playerDiv.className = 'player-item';
            playerDiv.innerHTML = `
                <span>ğŸ‘¤ Ù„Ø§Ø¹Ø¨ ${playerCount}</span>
                <div style="display: flex; gap: 5px;">
                    <input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨" class="player-input" 
                           oninput="updatePlayerName(${teamNumber}, ${playerCount}, this.value)"
                           style="width: 120px; padding: 5px;">
                    <button class="remove-player" onclick="removePlayer(this, ${teamNumber}, ${playerCount})">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            teamDiv.appendChild(playerDiv);
            
            // Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (teamNumber === 1) {
                gameConfig.team1.players.push('');
            } else {
                gameConfig.team2.players.push('');
            }
            
            console.log(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ù„Ø§Ø¹Ø¨ Ø¬Ø¯ÙŠØ¯ Ù„Ù„ÙØ±ÙŠÙ‚ ${teamNumber}`);
        }

        // ========== ØªØ­Ø¯ÙŠØ« Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ ==========
        function updatePlayerName(teamNumber, playerIndex, playerName) {
            if (teamNumber === 1) {
                gameConfig.team1.players[playerIndex] = playerName;
            } else {
                gameConfig.team2.players[playerIndex] = playerName;
            }
        }

        // ========== Ø¥Ø²Ø§Ù„Ø© Ù„Ø§Ø¹Ø¨ ==========
        function removePlayer(button, teamNumber, playerIndex) {
            const playerDiv = button.parentElement.parentElement;
            playerDiv.remove();
            
            // Ø¥Ø²Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (teamNumber === 1) {
                gameConfig.team1.players.splice(playerIndex, 1);
            } else {
                gameConfig.team2.players.splice(playerIndex, 1);
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
            updateTeamDisplay(teamNumber);
        }

        // ========== ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„ÙØ±ÙŠÙ‚ ==========
        function updateTeamDisplay(teamNumber) {
            const teamDiv = document.getElementById(`team${teamNumber}Players`);
            const players = teamNumber === 1 ? gameConfig.team1.players : gameConfig.team2.players;
            
            // ØªØ­Ø¯ÙŠØ« Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
            const playerItems = teamDiv.querySelectorAll('.player-item');
            playerItems.forEach((item, index) => {
                const span = item.querySelector('span');
                if (index === 0) {
                    span.innerHTML = 'ğŸ‘‘ Ø£Ù†Øª (Ù‚Ø§Ø¦Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚)';
                } else {
                    span.textContent = `ğŸ‘¤ Ù„Ø§Ø¹Ø¨ ${index}`;
                }
            });
        }

        // ========== Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ==========
        function toggleCategory(category) {
            const tag = document.querySelector(`[data-category="${category}"]`);
            const index = gameConfig.selectedCategories.indexOf(category);

            if (category === 'all') {
                // Ø¥Ø°Ø§ Ø§Ø®ØªØ±Øª "Ø§Ù„ÙƒÙ„"ØŒ Ø¥Ù„ØºØ§Ø¡ ÙƒÙ„ Ø§Ù„ØªØ­Ø¯ÙŠØ¯Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
                document.querySelectorAll('.category-tag').forEach(t => {
                    t.classList.remove('selected');
                });
                tag.classList.add('selected');
                gameConfig.selectedCategories = ['all'];
            } else {
                // Ø¥Ù„ØºØ§Ø¡ "Ø§Ù„ÙƒÙ„" Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø­Ø¯Ø¯Ø§Ù‹
                const allTag = document.querySelector('[data-category="all"]');
                if (allTag.classList.contains('selected')) {
                    allTag.classList.remove('selected');
                    gameConfig.selectedCategories = [];
                }

                // ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù‚Ø³Ù…
                tag.classList.toggle('selected');

                if (index === -1) {
                    gameConfig.selectedCategories.push(category);
                } else {
                    gameConfig.selectedCategories.splice(index, 1);
                }

                // Ø¥Ø°Ø§ Ù…Ø§ ÙÙŠ Ø£Ù‚Ø³Ø§Ù… Ù…Ø­Ø¯Ø¯Ø©ØŒ Ø­Ø¯Ø¯ "Ø§Ù„ÙƒÙ„"
                if (gameConfig.selectedCategories.length === 0) {
                    allTag.classList.add('selected');
                    gameConfig.selectedCategories = ['all'];
                }
            }

            console.log('Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©:', gameConfig.selectedCategories);
        }

        // ========== Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ© ==========
        function startTeamGame() {
            // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            gameConfig.roomName = document.getElementById('roomName').value;
            gameConfig.team1.name = document.getElementById('team1Name').value;
            gameConfig.team2.name = document.getElementById('team2Name').value;
            gameConfig.questionCount = parseInt(document.getElementById('questionCount').value);
            gameConfig.questionTime = parseInt(document.getElementById('questionTime').value);
            gameConfig.difficulty = document.getElementById('difficulty').value;
            
            // Ø¬Ù…Ø¹ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù…Ù† Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„ (Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ø¯)
            const team1Inputs = document.querySelectorAll('#team1Players .player-input');
            gameConfig.team1.players = [document.getElementById('player1Name').value];
            
            team1Inputs.forEach((input, index) => {
                if (index > 0 && input.value.trim()) {
                    gameConfig.team1.players.push(input.value.trim());
                }
            });
            
            // Ø¬Ù…Ø¹ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù…Ù† Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ
            const team2Inputs = document.querySelectorAll('#team2Players .player-input');
            gameConfig.team2.players = [];
            
            team2Inputs.forEach(input => {
                if (input.value.trim()) {
                    gameConfig.team2.players.push(input.value.trim());
                }
            });
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (!gameConfig.roomName.trim()) {
                alert('âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ©');
                return;
            }
            
            if (!gameConfig.team1.name.trim()) {
                alert('âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„');
                return;
            }
            
            if (!gameConfig.team2.name.trim()) {
                alert('âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ');
                return;
            }
            
            if (gameConfig.team1.players.length < 1) {
                alert('âŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ ÙÙŠ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„');
                return;
            }
            
            if (gameConfig.team2.players.length < 1) {
                alert('âŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ ÙÙŠ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ');
                return;
            }
            
            // Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
            localStorage.setItem('teamGameConfig', JSON.stringify(gameConfig));
            
            console.log('âœ… ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©:', gameConfig);
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
            window.location.href = 'team-game.html';
        }

        // ========== Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ==========
        function goBack() {
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>