<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª - ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø®Ø¨Ø©</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ===== RESET ===== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Cairo', sans-serif; 
            background: linear-gradient(135deg, #0c2461 0%, #1e3799 100%); 
            color: white; 
            min-height: 100vh;
        }
        
        /* ===== NAVBAR ===== */
        .navbar {
            background: rgba(10, 25, 47, 0.95);
            padding: 15px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 2px solid #00d4ff;
        }
        
        .nav-container {
            max-width: 1300px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.8rem;
            color: #00d4ff;
            text-decoration: none;
        }
        
        .logo i {
            font-size: 2.2rem;
        }
        
        .nav-links {
            display: flex;
            gap: 25px;
        }
        
        .nav-link {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 50px;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-link:hover, .nav-link.active {
            background: #00d4ff;
            color: black;
        }
        
        /* ===== MAIN CONTENT ===== */
        .main-container {
            max-width: 800px;
            margin: 100px auto 40px;
            padding: 0 30px;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .page-title {
            font-size: 3rem;
            color: #00d4ff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        
        .page-subtitle {
            color: #aaa;
            font-size: 1.2rem;
        }
        
        /* ===== SETTINGS SECTIONS ===== */
        .settings-sections {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .settings-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid rgba(0, 212, 255, 0.2);
        }
        
        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            color: #00d4ff;
            font-size: 1.5rem;
        }
        
        .section-header i {
            font-size: 1.8rem;
        }
        
        /* ===== SETTINGS OPTIONS ===== */
        .setting-option {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .option-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            cursor: pointer;
        }
        
        .option-title {
            font-size: 1.2rem;
            color: white;
        }
        
        .option-description {
            color: #aaa;
            margin-bottom: 15px;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        /* ===== SWITCH TOGGLE ===== */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #333;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #00d4ff;
        }
        
        input:checked + .slider:before {
            transform: translateX(30px);
        }
        
        /* ===== SELECT BOXES ===== */
        .select-box {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(0, 212, 255, 0.4);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            cursor: pointer;
        }
        
        .select-box option {
            background: #0c2461;
            color: white;
        }
        
        /* ===== SLIDER ===== */
        .slider-container {
            padding: 20px 0;
        }
        
        .slider-value {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .slider-value span {
            color: #00d4ff;
            font-weight: bold;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            background: rgba(0, 212, 255, 0.2);
            border-radius: 5px;
            outline: none;
        }
        
        /* ===== COLOR PICKER ===== */
        .color-options {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: 0.3s;
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        .color-option.active {
            border-color: white;
            transform: scale(1.1);
        }
        
        /* ===== BUTTONS ===== */
        .buttons-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            border-radius: 10px;
            border: none;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            justify-content: center;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #00d4ff, #0099ff);
            color: black;
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid rgba(0, 212, 255, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 212, 255, 0.3);
        }
        
        /* ===== USER PROFILE ===== */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            margin-bottom: 30px;
        }
        
        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00d4ff, #0099ff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
        }
        
        .user-info h3 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .user-info p {
            color: #aaa;
            font-size: 0.9rem;
        }
        
        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .main-container {
                margin-top: 150px;
            }
            
            .page-title {
                font-size: 2.2rem;
            }
            
            .user-profile {
                flex-direction: column;
                text-align: center;
            }
        }
        
        /* ===== ALERTS ===== */
        .alert {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            z-index: 10000;
            animation: slideInRight 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
        }
        
        .alert.success {
            background: rgba(0, 176, 155, 0.9);
            border-left: 5px solid #00b09b;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- ===== NAVBAR ===== -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <i class="fas fa-crown"></i>
                <span>ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø®Ø¨Ø©</span>
            </a>
            
            <div class="nav-links">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                </a>
                <a href="game.html" class="nav-link">
                    <i class="fas fa-gamepad"></i> Ø§Ù„Ù„Ø¹Ø¨Ø©
                </a>
                <a href="setup.html" class="nav-link active">
                    <i class="fas fa-cog"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </a>
                <a href="admin.html" class="nav-link">
                    <i class="fas fa-user-shield"></i> Ø§Ù„ØªØ­ÙƒÙ…
                </a>
                <a href="#" class="nav-link" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬
                </a>
            </div>
        </div>
    </nav>

    <!-- ===== MAIN CONTENT ===== -->
    <div class="main-container">
        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">
                <i class="fas fa-sliders-h"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
            </h1>
            <p class="page-subtitle">
                Ø®ØµØµ ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù„Ø¹Ø¨ Ø­Ø³Ø¨ Ø±ØºØ¨ØªÙƒ ÙˆØ§Ø¶Ø¨Ø· Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            </p>
        </div>

        <!-- User Profile -->
        <div class="user-profile">
            <div class="avatar">
                <i class="fas fa-user"></i>
            </div>
            <div class="user-info">
                <h3 id="userName">Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯</h3>
                <p id="userEmail">mohammed@example.com</p>
                <p id="userType">Ù„Ø§Ø¹Ø¨</p>
            </div>
        </div>

        <!-- Settings Sections -->
        <div class="settings-sections">
            <!-- Section 1: Game Settings -->
            <div class="settings-section">
                <div class="section-header">
                    <i class="fas fa-gamepad"></i>
                    <h2>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©</h2>
                </div>
                
                <div class="setting-option">
                    <div class="option-label" onclick="toggleSound()">
                        <div>
                            <div class="option-title">ğŸµ ØµÙˆØª Ø§Ù„Ù„Ø¹Ø¨Ø©</div>
                            <div class="option-description">
                                ØªØ´ØºÙŠÙ„ Ø£Ùˆ Ø¥ÙŠÙ‚Ø§Ù ØµÙˆØª Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª ÙˆØ§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰
                            </div>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="soundToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-option">
                    <div class="option-label">
                        <div>
                            <div class="option-title">â±ï¸ ÙˆÙ‚Øª ÙƒÙ„ Ø³Ø¤Ø§Ù„</div>
                            <div class="option-description">
                                Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ ÙƒÙ„ Ø³Ø¤Ø§Ù„
                            </div>
                        </div>
                    </div>
                    <div class="slider-container">
                        <div class="slider-value">
                            <span>10 Ø«ÙˆØ§Ù†ÙŠ</span>
                            <span id="timeValue">30 Ø«ÙˆØ§Ù†ÙŠ</span>
                            <span>60 Ø«ÙˆØ§Ù†ÙŠ</span>
                        </div>
                        <input type="range" id="timeSlider" min="10" max="60" value="30">
                    </div>
                </div>
                
                <div class="setting-option">
                    <div class="option-label">
                        <div>
                            <div class="option-title">ğŸ“Š Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©</div>
                            <div class="option-description">
                                Ø§Ø®ØªØ± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø§Ø³Ø¨Ùƒ
                            </div>
                        </div>
                    </div>
                    <select class="select-box" id="difficultySelect">
                        <option value="easy">Ø³Ù‡Ù„</option>
                        <option value="medium" selected>Ù…ØªÙˆØ³Ø·</option>
                        <option value="hard">ØµØ¹Ø¨</option>
                        <option value="expert">Ø®Ø¨ÙŠØ±</option>
                    </select>
                </div>
                
                <div class="setting-option">
                    <div class="option-label">
                        <div>
                            <div class="option-title">ğŸ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</div>
                            <div class="option-description">
                                Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙÙŠ ÙƒÙ„ Ø¬ÙˆÙ„Ø©
                            </div>
                        </div>
                    </div>
                    <div class="slider-container">
                        <div class="slider-value">
                            <span>5 Ø£Ø³Ø¦Ù„Ø©</span>
                            <span id="questionsValue">10 Ø£Ø³Ø¦Ù„Ø©</span>
                            <span>20 Ø³Ø¤Ø§Ù„</span>
                        </div>
                        <input type="range" id="questionsSlider" min="5" max="20" value="10">
                    </div>
                </div>
            </div>

            <!-- Section 2: Appearance Settings -->
            <div class="settings-section">
                <div class="section-header">
                    <i class="fas fa-palette"></i>
                    <h2>Ø§Ù„Ù…Ø¸Ù‡Ø± ÙˆØ§Ù„ØªØµÙ…ÙŠÙ…</h2>
                </div>
                
                <div class="setting-option">
                    <div class="option-label">
                        <div>
                            <div class="option-title">ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</div>
                            <div class="option-description">
                                ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ ÙˆØ§Ù„Ù†Ù‡Ø§Ø±ÙŠ
                            </div>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="darkModeToggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-option">
                    <div class="option-label">
                        <div>
                            <div class="option-title">ğŸ¨ Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø©</div>
                            <div class="option-description">
                                Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©
                            </div>
                        </div>
                    </div>
                    <div class="color-options">
                        <div class="color-option active" style="background: #00d4ff;" onclick="setThemeColor('#00d4ff')"></div>
                        <div class="color-option" style="background: #ff4757;" onclick="setThemeColor('#ff4757')"></div>
                        <div class="color-option" style="background: #2ed573;" onclick="setThemeColor('#2ed573')"></div>
                        <div class="color-option" style="background: #ffa502;" onclick="setThemeColor('#ffa502')"></div>
                        <div class="color-option" style="background: #3742fa;" onclick="setThemeColor('#3742fa')"></div>
                        <div class="color-option" style="background: #a55eea;" onclick="setThemeColor('#a55eea')"></div>
                    </div>
                </div>
                
                <div class="setting-option">
                    <div class="option-label">
                        <div>
                            <div class="option-title">ğŸ”¤ Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</div>
                            <div class="option-description">
                            </div>
                        </div>
                    </div>
                    <div class="slider-container">
                        <div class="slider-value">
                            <span>ØµØºÙŠØ±</span>
                            <span id="fontSizeValue">Ù…ØªÙˆØ³Ø·</span>
                            <span>ÙƒØ¨ÙŠØ±</span>
                        </div>
                        <input type="range" id="fontSizeSlider" min="14" max="24" value="18">
                    </div>
                </div>
            </div>

            <!-- Section 3: Account Settings -->
            <div class="settings-section">
                <div class="section-header">
                    <i class="fas fa-user-cog"></i>
                    <h2>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨</h2>
                </div>
                
                <div class="setting-option">
                    <div class="option-label">
                        <div>
                            <div class="option-title">ğŸ“§ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ø±ÙŠØ¯</div>
                            <div class="option-description">
                                ØªÙ„Ù‚ÙŠ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¹Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
                            </div>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="notificationsToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-option">
                    <div class="option-label" onclick="showPrivacySettings()">
                        <div>
                            <div class="option-title">ğŸ”’ Ø§Ù„Ø®ØµÙˆØµÙŠØ©</div>
                            <div class="option-description">
                                Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®ØµÙˆØµÙŠØ© ÙˆØ§Ù„Ø­Ø³Ø§Ø¨
                            </div>
                        </div>
                        <i class="fas fa-chevron-left"></i>
                    </div>
                </div>
                
                <div class="setting-option">
                    <div class="option-label" onclick="showChangePassword()">
                        <div>
                            <div class="option-title">ğŸ”‘ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</div>
                            <div class="option-description">
                                ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø­Ø³Ø§Ø¨Ùƒ
                            </div>
                        </div>
                        <i class="fas fa-chevron-left"></i>
                    </div>
                </div>
                
                <div class="setting-option">
                    <div class="option-label" onclick="exportData()">
                        <div>
                            <div class="option-title">ğŸ’¾ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
                            <div class="option-description">
                                Ø­ÙØ¸ Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙƒ ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„Ù„Ø¹Ø¨
                            </div>
                        </div>
                        <i class="fas fa-download"></i>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="buttons-group">
                <button class="btn btn-primary" onclick="saveSettings()">
                    <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </button>
                <button class="btn btn-secondary" onclick="resetSettings()">
                    <i class="fas fa-undo"></i> Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                </button>
                <button class="btn btn-secondary" onclick="startGameWithSettings()">
                    <i class="fas fa-play"></i> Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
                </button>
            </div>
        </div>
    </div>

    <!-- Alerts Container -->
    <div id="alertContainer"></div>

    <!-- JavaScript -->
    <script>
        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ØµÙØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¬Ø§Ù‡Ø²Ø©');
            
            // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            loadUserData();
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
            loadSavedSettings();
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ event listeners
            setupEventListeners();
        });
        
        // ===== LOAD USER DATA =====
        function loadUserData() {
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            
            if (user.email) {
                document.getElementById('userName').textContent = user.name || 'Ù„Ø§Ø¹Ø¨';
                document.getElementById('userEmail').textContent = user.email;
                document.getElementById('userType').textContent = user.type === 'admin' ? 'Ù…Ø´Ø±Ù' : 'Ù„Ø§Ø¹Ø¨';
            } else {
                // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„
                showAlert('error', 'âŒ ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 2000);
            }
        }
        
        // ===== LOAD SAVED SETTINGS =====
        function loadSavedSettings() {
            const settings = JSON.parse(localStorage.getItem('gameSettings') || '{}');
            
            // Ø§Ù„ØµÙˆØª
            if (settings.sound !== undefined) {
                document.getElementById('soundToggle').checked = settings.sound;
            }
            
            // Ø§Ù„ÙˆÙ‚Øª
            if (settings.time) {
                document.getElementById('timeSlider').value = settings.time;
                updateTimeValue();
            }
            
            // Ø§Ù„ØµØ¹ÙˆØ¨Ø©
            if (settings.difficulty) {
                document.getElementById('difficultySelect').value = settings.difficulty;
            }
            
            // Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
            if (settings.questions) {
                document.getElementById('questionsSlider').value = settings.questions;
                updateQuestionsValue();
            }
            
            // Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
            if (settings.darkMode !== undefined) {
                document.getElementById('darkModeToggle').checked = settings.darkMode;
                toggleDarkMode(settings.darkMode);
            }
            
            // Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø©
            if (settings.themeColor) {
                setThemeColor(settings.themeColor, false);
            }
            
            // Ø­Ø¬Ù… Ø§Ù„Ø®Ø·
            if (settings.fontSize) {
                document.getElementById('fontSizeSlider').value = settings.fontSize;
                updateFontSizeValue();
                applyFontSize(settings.fontSize);
            }
            
            // Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
            if (settings.notifications !== undefined) {
                document.getElementById('notificationsToggle').checked = settings.notifications;
            }
        }
        
        // ===== EVENT LISTENERS =====
        function setupEventListeners() {
            // Ø³Ù„Ø§ÙŠØ¯Ø± Ø§Ù„ÙˆÙ‚Øª
            document.getElementById('timeSlider').addEventListener('input', updateTimeValue);
            
            // Ø³Ù„Ø§ÙŠØ¯Ø± Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
            document.getElementById('questionsSlider').addEventListener('input', updateQuestionsValue);
            
            // Ø³Ù„Ø§ÙŠØ¯Ø± Ø­Ø¬Ù… Ø§Ù„Ø®Ø·
            document.getElementById('fontSizeSlider').addEventListener('input', function() {
                updateFontSizeValue();
                applyFontSize(this.value);
            });
            
            // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
            document.getElementById('darkModeToggle').addEventListener('change', function() {
                toggleDarkMode(this.checked);
            });
        }
        
        // ===== UPDATE DISPLAY VALUES =====
        function updateTimeValue() {
            const value = document.getElementById('timeSlider').value;
            document.getElementById('timeValue').textContent = value + ' Ø«ÙˆØ§Ù†ÙŠ';
        }
        
        function updateQuestionsValue() {
            const value = document.getElementById('questionsSlider').value;
            document.getElementById('questionsValue').textContent = value + ' Ø£Ø³Ø¦Ù„Ø©';
        }
        
        function updateFontSizeValue() {
            const value = document.getElementById('fontSizeSlider').value;
            let sizeText = 'Ù…ØªÙˆØ³Ø·';
            if (value < 16) sizeText = 'ØµØºÙŠØ±';
            else if (value > 20) sizeText = 'ÙƒØ¨ÙŠØ±';
            document.getElementById('fontSizeValue').textContent = sizeText;
        }
        
        // ===== THEME FUNCTIONS =====
        function setThemeColor(color, showAlert = true) {
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù„ÙˆØ§Ù†
            document.querySelectorAll('.color-option').forEach(option => {
                option.classList.remove('active');
            });
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø´Ø· Ù„Ù„ÙˆÙ† Ø§Ù„Ù…Ø®ØªØ§Ø±
            event.target.classList.add('active');
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù…Ø©
            document.documentElement.style.setProperty('--primary-color', color);
            
            if (showAlert) {
                showAlertMessage('success', `âœ… ØªÙ… ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø©`);
            }
        }
        
        function toggleDarkMode(enabled) {
            if (enabled) {
                document.body.style.backgroundColor = '#0a1929';
                document.body.style.color = '#e0e0e0';
                showAlertMessage('success', 'ğŸŒ™ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ');
            } else {
                document.body.style.backgroundColor = '';
                document.body.style.color = '';
                showAlertMessage('success', 'â˜€ï¸ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ');
            }
        }
        
        function applyFontSize(size) {
            document.body.style.fontSize = size + 'px';
        }
        
        // ===== SAVE SETTINGS =====
        function saveSettings() {
            const settings = {
                sound: document.getElementById('soundToggle').checked,
                time: parseInt(document.getElementById('timeSlider').value),
                difficulty: document.getElementById('difficultySelect').value,
                questions: parseInt(document.getElementById('questionsSlider').value),
                darkMode: document.getElementById('darkModeToggle').checked,
                themeColor: getActiveThemeColor(),
                fontSize: parseInt(document.getElementById('fontSizeSlider').value),
                notifications: document.getElementById('notificationsToggle').checked,
                savedAt: new Date().toISOString()
            };
            
            localStorage.setItem('gameSettings', JSON.stringify(settings));
            
            showAlertMessage('success', 'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        function getActiveThemeColor() {
            const activeColor = document.querySelector('.color-option.active');
            return activeColor ? activeColor.style.backgroundColor : '#00d4ff';
        }
        
        // ===== RESET SETTINGS =====
        function resetSettings() {
            if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©ØŸ')) {
                localStorage.removeItem('gameSettings');
                
                // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ù„Ù„Ù‚ÙŠÙ… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
                document.getElementById('soundToggle').checked = true;
                document.getElementById('timeSlider').value = 30;
                document.getElementById('difficultySelect').value = 'medium';
                document.getElementById('questionsSlider').value = 10;
                document.getElementById('darkModeToggle').checked = false;
                document.getElementById('fontSizeSlider').value = 18;
                document.getElementById('notificationsToggle').checked = true;
                
                // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
                document.querySelectorAll('.color-option').forEach(option => {
                    option.classList.remove('active');
                    if (option.style.backgroundColor === 'rgb(0, 212, 255)') {
                        option.classList.add('active');
                    }
                });
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©
                updateTimeValue();
                updateQuestionsValue();
                updateFontSizeValue();
                toggleDarkMode(false);
                applyFontSize(18);
                
                showAlertMessage('success', 'ğŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
            }
        }
        
        // ===== START GAME =====
        function startGameWithSettings() {
            // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£ÙˆÙ„Ø§Ù‹
            saveSettings();
            
            // ØªØ­Ø¶ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
            const gameConfig = {
                timePerQuestion: parseInt(document.getElementById('timeSlider').value),
                difficulty: document.getElementById('difficultySelect').value,
                totalQuestions: parseInt(document.getElementById('questionsSlider').value),
                soundEnabled: document.getElementById('soundToggle').checked
            };
            
            localStorage.setItem('gameConfig', JSON.stringify(gameConfig));
            
            showAlertMessage('success', 'ğŸš€ Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù„Ø¹Ø¨Ø©...');
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
            setTimeout(() => {
                window.location.href = 'game.html';
            }, 1500);
        }
        
        // ===== OTHER FUNCTIONS =====
        function showPrivacySettings() {
            showAlertMessage('info', 'ğŸ”’ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®ØµÙˆØµÙŠØ© Ù‚Ø±ÙŠØ¨Ø§Ù‹');
        }
        
        function showChangePassword() {
            showAlertMessage('info', 'ğŸ”‘ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹');
        }
        
        function exportData() {
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            const settings = JSON.parse(localStorage.getItem('gameSettings') || '{}');
            
            const data = {
                user: user,
                settings: settings,
                exportedAt: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `elite-challenge-data-${Date.now()}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showAlertMessage('success', 'ğŸ’¾ ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        function logout() {
            if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
                localStorage.removeItem('user');
                showAlertMessage('success', 'âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1500);
            }
        }
        
        // ===== ALERT SYSTEM =====
        function showAlertMessage(type, message) {
            const alertContainer = document.getElementById('alertContainer');
            const alert = document.createElement('div');
            alert.className = `alert ${type}`;
            alert.innerHTML = `
                <i class="fas fa-${getAlertIcon(type)}"></i>
                <span>${message}</span>
            `;
            alertContainer.appendChild(alert);
            
            setTimeout(() => {
                alert.style.animation = 'slideInRight 0.3s ease reverse';
                setTimeout(() => alert.remove(), 300);
            }, 3000);
        }
        
        function getAlertIcon(type) {
            switch(type) {
                case 'success': return 'check-circle';
                case 'error': return 'exclamation-circle';
                case 'info': return 'info-circle';
                default: return 'info-circle';
            }
        }
    </script>
</body>
</html>